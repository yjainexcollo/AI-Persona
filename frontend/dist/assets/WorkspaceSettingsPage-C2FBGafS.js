import{a as X,g as Z,r as i,u as ee,_ as se,b as D,T as t,j as e,s as W,c as ae,e as te,B as o,C as H}from"./index-DYCawVz4.js";import{c as I,D as re,C as oe,S as ne,a as z}from"./AdminSidebar-BvsYjg6b.js";import{g as ie,u as le,d as ce}from"./workspaceService-DNIeEo99.js";import{A as M}from"./Alert-D72j-c0T.js";import{G as h}from"./Grid-DPr4U-HA.js";import{P as de}from"./Paper-Bgtif2Ge.js";import{T as N,F as E,a as L,S as U}from"./TextField-DEyW8a8s.js";import{B as k}from"./Button-C_jCaeEK.js";import{c as O}from"./createSvgIcon-pvlxLHl_.js";import{C as F,a as B}from"./CardContent-DwqfbSep.js";import{D as S}from"./Divider-DltVXmpm.js";import{D as xe,a as me,b as he,c as pe}from"./DialogTitle-72MACD6J.js";import"./useControlled-B9mKIuas.js";import"./Menu-Cj0BlqQ8.js";import"./resolveComponentProps-RqVTStnW.js";import"./createSvgIcon-C__bowmj.js";import"./HomeOutlined-28NUgevx.js";import"./IconButton-BeZRpjOd.js";import"./session-sYSmwvGn.js";import"./useSlot-BHojEugq.js";function ue(a){return Z("MuiCardHeader",a)}const _=X("MuiCardHeader",["root","avatar","action","content","title","subheader"]),je=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],fe=a=>{const{classes:r}=a;return te({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},ue,r)},ye=W("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(a,r)=>D({[`& .${_.title}`]:r.title,[`& .${_.subheader}`]:r.subheader},r.root)})({display:"flex",alignItems:"center",padding:16}),be=W("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(a,r)=>r.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),ge=W("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(a,r)=>r.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),ve=W("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(a,r)=>r.content})({flex:"1 1 auto"}),Ce=i.forwardRef(function(r,g){const j=ee({props:r,name:"MuiCardHeader"}),{action:p,avatar:u,className:v,component:l="div",disableTypography:f=!1,subheader:x,subheaderTypographyProps:T,title:C,titleTypographyProps:y}=j,w=se(j,je),m=D({},j,{component:l,disableTypography:f}),c=fe(m);let n=C;n!=null&&n.type!==t&&!f&&(n=e.jsx(t,D({variant:u?"body2":"h5",className:c.title,component:"span",display:"block"},y,{children:n})));let d=x;return d!=null&&d.type!==t&&!f&&(d=e.jsx(t,D({variant:u?"body2":"body1",className:c.subheader,color:"text.secondary",component:"span",display:"block"},T,{children:d}))),e.jsxs(ye,D({className:ae(c.root,v),as:l,ref:g,ownerState:m},w,{children:[u&&e.jsx(be,{className:c.avatar,ownerState:m,children:u}),e.jsxs(ve,{className:c.content,ownerState:m,children:[n,d]}),p&&e.jsx(ge,{className:c.action,ownerState:m,children:p})]}))}),q=O(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),ke=O(e.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save"),Se=["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","Europe/London","Europe/Paris","Europe/Berlin","Asia/Tokyo","Asia/Shanghai","Australia/Sydney"],De=["en-US","en-GB","es-ES","fr-FR","de-DE","it-IT","pt-BR","ja-JP","zh-CN","ko-KR"],Ve=()=>{const[a,r]=i.useState(null),[g,j]=i.useState(!0),[p,u]=i.useState(!1),[v,l]=i.useState(""),[f,x]=i.useState(""),[T,C]=i.useState(!1),[y,w]=i.useState(!1),[m,c]=i.useState(""),[n,d]=i.useState({name:"",timezone:"",locale:""});i.useEffect(()=>{G()},[]);const G=async()=>{try{j(!0),l("");const s=await ie();r(s),d({name:s.name||"",timezone:s.timezone||"UTC",locale:s.locale||"en-US"})}catch(s){l(s instanceof Error?s.message:"Failed to load workspace data")}finally{j(!1)}},A=(s,b)=>{d(Q=>({...Q,[s]:b}))},V=async s=>{if(s.preventDefault(),!a){l("No workspace data available");return}try{u(!0),l(""),x("");const b=await le(a.id,n);x("Workspace updated successfully!"),r(b),setTimeout(()=>x(""),3e3)}catch(b){l(b instanceof Error?b.message:"Failed to update workspace")}finally{u(!1)}},$=()=>{a&&(d({name:a.name||"",timezone:a.timezone||"UTC",locale:a.locale||"en-US"}),l(""),x(""))},J=()=>{C(!0),c("")},K=async()=>{if(a)try{w(!0),l(""),await ce(a.id,m||void 0),x("Workspace deletion requested successfully. The workspace will be permanently deleted in 30 days."),C(!1),c(""),setTimeout(()=>x(""),5e3)}catch(s){l(s instanceof Error?s.message:"Failed to request workspace deletion")}finally{w(!1)}},P=()=>{C(!1),c("")},[Y,R]=i.useState(!1);return e.jsxs(o,{sx:{display:"flex",minHeight:"100vh"},children:[e.jsx(o,{sx:{display:{xs:"none",md:"block"}},children:e.jsx(I,{})}),e.jsx(re,{open:Y,onClose:()=>R(!1),PaperProps:{sx:{width:240}},children:e.jsx(I,{isDrawer:!0})}),e.jsxs(o,{sx:{flex:1,display:"flex",flexDirection:"column",ml:{xs:0,md:"220px"}},children:[e.jsx(oe,{onToggleSidebar:()=>R(!0)}),e.jsx(o,{sx:{flex:1,p:{xs:2,md:3},backgroundColor:"#f5f5f5"},children:!a||g?e.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:g?e.jsx(H,{}):e.jsx(t,{variant:"h6",color:"error",children:v||"Failed to load workspace data"})}):e.jsxs(o,{sx:{maxWidth:800,mx:"auto"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(ne,{sx:{mr:2,fontSize:32,color:"primary.main"}}),e.jsx(t,{variant:"h4",component:"h1",children:"Workspace Settings"})]}),v&&e.jsx(M,{severity:"error",sx:{mb:2},children:v}),f&&e.jsx(M,{severity:"success",sx:{mb:2},children:f}),e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,md:8,children:e.jsxs(de,{sx:{p:3},children:[e.jsx(t,{variant:"h6",sx:{mb:3},children:"General Settings"}),e.jsx("form",{onSubmit:V,children:e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,children:e.jsx(N,{fullWidth:!0,label:"Workspace Name",value:n.name,onChange:s=>A("name",s.target.value),required:!0,helperText:"Workspace name must be between 2 and 100 characters",error:n.name.length>0&&n.name.length<2})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(E,{fullWidth:!0,children:[e.jsx(L,{children:"Timezone"}),e.jsx(U,{value:n.timezone,label:"Timezone",onChange:s=>A("timezone",s.target.value),children:Se.map(s=>e.jsx(z,{value:s,children:s},s))})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(E,{fullWidth:!0,children:[e.jsx(L,{children:"Locale"}),e.jsx(U,{value:n.locale,label:"Locale",onChange:s=>A("locale",s.target.value),children:De.map(s=>e.jsx(z,{value:s,children:s},s))})]})}),e.jsx(h,{item:!0,xs:12,children:e.jsxs(o,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[e.jsx(k,{variant:"outlined",onClick:$,disabled:p,children:"Reset"}),e.jsx(k,{type:"submit",variant:"contained",startIcon:p?e.jsx(H,{size:20}):e.jsx(ke,{}),disabled:p,children:p?"Saving...":"Save Changes"})]})})]})})]})}),e.jsxs(h,{item:!0,xs:12,md:4,children:[e.jsxs(F,{children:[e.jsx(Ce,{title:"Workspace Info"}),e.jsxs(B,{children:[e.jsxs(o,{sx:{mb:2},children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:"Workspace ID"}),e.jsx(t,{variant:"body1",sx:{fontFamily:"monospace"},children:a.id})]}),e.jsx(S,{sx:{my:2}}),e.jsxs(o,{sx:{mb:2},children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:"Domain"}),e.jsx(t,{variant:"body1",children:a.domain||"Not set"})]}),e.jsx(S,{sx:{my:2}}),e.jsxs(o,{sx:{mb:2},children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:"Status"}),e.jsx(t,{variant:"body1",color:a.isActive?"success.main":"error.main",children:a.isActive?"Active":"Inactive"})]}),e.jsx(S,{sx:{my:2}}),e.jsxs(o,{sx:{mb:2},children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:"Max Members"}),e.jsx(t,{variant:"body1",children:a.maxMembers})]}),e.jsx(S,{sx:{my:2}}),e.jsxs(o,{sx:{mb:2},children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:"Created"}),e.jsx(t,{variant:"body1",children:new Date(a.createdAt).toLocaleDateString()})]}),e.jsx(S,{sx:{my:2}}),e.jsxs(o,{children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:"Last Updated"}),e.jsx(t,{variant:"body1",children:new Date(a.updatedAt).toLocaleDateString()})]})]})]}),e.jsx(F,{sx:{mt:3,border:"2px solid #ff4444"},children:e.jsxs(B,{children:[e.jsx(t,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Once you delete a workspace, there is no going back. Please be certain."}),e.jsx(k,{variant:"outlined",color:"error",startIcon:e.jsx(q,{}),onClick:J,fullWidth:!0,children:"Delete Workspace"})]})})]})]})]})})]}),e.jsxs(xe,{open:T,onClose:P,maxWidth:"sm",fullWidth:!0,children:[e.jsx(me,{sx:{color:"error.main"},children:"Delete Workspace"}),e.jsxs(he,{children:[e.jsxs(t,{sx:{mb:2},children:["Are you sure you want to delete the workspace ",e.jsxs("strong",{children:['"',a==null?void 0:a.name,'"']}),"?"]}),e.jsx(t,{sx:{mb:2,color:"text.secondary"},children:"This action will:"}),e.jsxs(o,{component:"ul",sx:{pl:2,mb:2},children:[e.jsx(t,{component:"li",sx:{mb:1},children:"Request workspace deletion (scheduled for 30 days from now)"}),e.jsx(t,{component:"li",sx:{mb:1},children:'Set workspace status to "Pending Deletion"'}),e.jsx(t,{component:"li",sx:{mb:1},children:"Permanently delete all workspace data after 30 days"}),e.jsx(t,{component:"li",sx:{mb:1},children:"Remove all members from the workspace"})]}),e.jsx(t,{sx:{mb:2,color:"error.main",fontWeight:"bold"},children:"This action cannot be undone!"}),e.jsx(N,{fullWidth:!0,label:"Reason for deletion (optional)",value:m,onChange:s=>c(s.target.value),placeholder:"e.g., No longer needed, migrating to another platform",multiline:!0,rows:3,helperText:"Maximum 500 characters",inputProps:{maxLength:500}})]}),e.jsxs(pe,{children:[e.jsx(k,{onClick:P,disabled:y,children:"Cancel"}),e.jsx(k,{onClick:K,color:"error",variant:"contained",disabled:y,startIcon:y?e.jsx(H,{size:20}):e.jsx(q,{}),children:y?"Deleting...":"Delete Workspace"})]})]})]})};export{Ve as default};
