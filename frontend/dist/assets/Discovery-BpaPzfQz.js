import{g as Q,a as q,r as j,u as J,_ as K,b as z,j as e,s as ee,c as se,e as te,R as oe,B as r,T as w,m as $,k as V,l as re}from"./index-DYCawVz4.js";import{H as T}from"./Header-BB7n4d5L.js";import{S as ne}from"./SearchBar-cfu6h9oq.js";import{C as G}from"./Chip-CnI6PA8M.js";import{I as R}from"./IconButton-BeZRpjOd.js";import{c as P}from"./createSvgIcon-pvlxLHl_.js";import{M as ie}from"./Menu-Cj0BlqQ8.js";import{a as _}from"./AdminSidebar-BvsYjg6b.js";import{F as ae}from"./FormControlLabel-u7SE38xb.js";import{C as le}from"./Checkbox-DCgHLu7J.js";import{G as ce}from"./Logout-DKgDsamw.js";import{u as O}from"./Stack-B-cO6J0H.js";import{C as xe,a as me}from"./CardContent-DwqfbSep.js";import{G as B}from"./Grid-DPr4U-HA.js";import{C as de}from"./ChevronLeft-BuPp86RS.js";import{B as N}from"./Button-C_jCaeEK.js";import{g as pe}from"./personaService-ZsIsG1EY.js";import{C as H}from"./Container-DDyoxMTW.js";import"./SettingsPage-BGGOkA7M.js";import"./createSvgIcon-C__bowmj.js";import"./useControlled-B9mKIuas.js";import"./session-sYSmwvGn.js";import"./useSlot-BHojEugq.js";import"./resolveComponentProps-RqVTStnW.js";import"./Paper-Bgtif2Ge.js";import"./SwitchBase-C-v0Ae8P.js";import"./TextField-DEyW8a8s.js";import"./DialogTitle-72MACD6J.js";import"./HomeOutlined-28NUgevx.js";import"./InputAdornment-CMOWfscG.js";import"./Divider-DltVXmpm.js";import"./useThemeProps-CsaTaIua.js";function he(s){return Q("MuiCardMedia",s)}q("MuiCardMedia",["root","media","img"]);const fe=["children","className","component","image","src","style"],ue=s=>{const{classes:t,isMediaComponent:i,isImageComponent:l}=s;return te({root:["root",i&&"media",l&&"img"]},he,t)},ge=ee("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:i}=s,{isMediaComponent:l,isImageComponent:u}=i;return[t.root,l&&t.media,u&&t.img]}})(({ownerState:s})=>z({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},s.isMediaComponent&&{width:"100%"},s.isImageComponent&&{objectFit:"cover"})),ve=["video","audio","picture","iframe","img"],be=["picture","img"],Ce=j.forwardRef(function(t,i){const l=J({props:t,name:"MuiCardMedia"}),{children:u,className:h,component:g="div",image:m,src:f,style:d}=l,p=K(l,fe),c=ve.indexOf(g)!==-1,a=!c&&m?z({backgroundImage:`url("${m}")`},d):d,b=z({},l,{component:g,isMediaComponent:c,isImageComponent:be.indexOf(g)!==-1}),S=ue(b);return e.jsx(ge,z({className:se(S.root,h),as:g,role:!c&&m?"img":void 0,ref:i,style:a,ownerState:b,src:c?m||f:void 0},p,{children:u}))}),je=P(e.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight"),ye=P(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),we=P(e.jsx("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList"),Se=["All","Tech","Marketing","Sales"],ke=({filters:s,onFilterChange:t,showSelectedIndicator:i=!1,showClearAll:l=!0,title:u="Department Filters"})=>{var A;const[h,g]=oe.useState(null),m=!!h,f=o=>{g(o.currentTarget)},d=()=>{g(null)},p=s.filter(o=>o.active),c=p.length>0,a=p.length===0,b=()=>{s.forEach(o=>{o.active&&t(o.value)})},S=()=>{c&&b()},D=o=>{t(o)},M=o=>{switch(o){case"Tech":case"Technology":return"#2950DA";case"Marketing":return"#2950DA";case"Sales":return"#2950DA";case"All":return"#2950DA";default:return"#2950DA"}},I=o=>{var y;return o==="All"?a:((y=s.find(k=>k.value===o))==null?void 0:y.active)||!1};return e.jsx(r,{sx:{width:"100%"},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:{xs:1,sm:2},flexWrap:"wrap",mb:i&&c?2:0},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:{xs:1,sm:1},flexWrap:"wrap",flex:1},children:[a&&e.jsx(G,{label:"All Departments",variant:"filled",sx:{backgroundColor:"#E8ECF2",color:"#222",fontWeight:600,borderRadius:2,fontSize:{xs:"13px",sm:"14px"},height:{xs:32,sm:36},"& .MuiChip-label":{px:{xs:1,sm:1.5}},"& .MuiChip-deleteIcon":{color:"#222","&:hover":{color:"#526794"}},boxShadow:"0 0 0 2px #E8ECF220"}}),s.map(o=>o.active&&e.jsx(G,{label:o.label,onClick:()=>t(o.value),onDelete:()=>t(o.value),variant:"filled",sx:{backgroundColor:"#E8ECF2",color:"#2950DA",fontWeight:600,borderRadius:2,fontSize:{xs:"13px",sm:"14px"},height:{xs:32,sm:36},transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"#E8ECF2",transform:"translateY(-1px)",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},"& .MuiChip-label":{px:{xs:1,sm:1.5}},"& .MuiChip-deleteIcon":{color:"#2950DA","&:hover":{color:"#526794"}},boxShadow:"0 0 0 2px #E8ECF220"}},o.value))]}),e.jsx(R,{sx:{color:c?M((A=p[0])==null?void 0:A.value):"#2950DA",backgroundColor:c?"#f5f5f5":"transparent",ml:{xs:.5,sm:1},transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"#f0f0f0",transform:"rotate(90deg)"},width:{xs:40,sm:36},height:{xs:40,sm:36}},onClick:f,"aria-controls":m?"filter-menu":void 0,"aria-haspopup":"true","aria-expanded":m?"true":void 0,children:e.jsx(we,{sx:{fontSize:{xs:22,sm:20}}})}),l&&c&&e.jsx(R,{onClick:b,sx:{color:"#666",backgroundColor:"#f5f5f5",ml:.5,transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"#ffebee",color:"#d32f2f",transform:"scale(1.1)"},width:{xs:32,sm:28},height:{xs:32,sm:28}},title:"Clear all filters",children:e.jsx(ye,{sx:{fontSize:{xs:18,sm:16}}})}),e.jsxs(ie,{id:"filter-menu",anchorEl:h,open:m,onClose:d,PaperProps:{sx:{mt:1.5,minWidth:200,borderRadius:3,boxShadow:"0 4px 24px rgba(44,62,80,0.13)",maxHeight:320,overflowY:"auto",p:1}},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(_,{sx:{fontSize:14,py:1,px:1.5,borderRadius:2,color:"#333",fontWeight:600,"&:hover":{backgroundColor:"transparent"},cursor:"default"},disabled:!0,children:u}),Se.map((o,y)=>{const k=I(o);return e.jsx(_,{onClick:C=>{if(C.preventDefault(),C.stopPropagation(),o==="All")S();else{const E=s.find(F=>F.value===o);E&&D(E.value)}},sx:{fontSize:14,py:.5,px:1,borderRadius:2,whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:1,"&:hover":{backgroundColor:"#f0f0f0"},cursor:"pointer",userSelect:"none"},children:e.jsx(ae,{control:e.jsx(le,{checked:k,size:"small",sx:{color:"#2950DA","&.Mui-checked":{color:"#2950DA"},"&:hover":{backgroundColor:"rgba(41, 80, 218, 0.04)"},"& .MuiSvgIcon-root":{fontSize:18},pointerEvents:"none"},onChange:()=>{}}),label:e.jsx(w,{sx:{fontSize:14,fontWeight:500},children:o==="All"?"All Departments":`${o} Department`}),sx:{margin:0,width:"100%","& .MuiFormControlLabel-label":{flex:1},pointerEvents:"none"},onClick:C=>{C.preventDefault(),C.stopPropagation()}})},y)})]})]})})};function Me(s){return ce({attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 18 5 L 18 7 L 23.5625 7 L 11.28125 19.28125 L 12.71875 20.71875 L 25 8.4375 L 25 14 L 27 14 L 27 5 Z M 5 9 L 5 27 L 23 27 L 23 14 L 21 16 L 21 25 L 7 25 L 7 11 L 16 11 L 18 9 Z"},child:[]}]})(s)}const Ie=({persona:s,onStartChat:t,onViewPersona:i,cardFullWidth:l})=>{const u=$(),h=O(u.breakpoints.down("sm")),g=O(u.breakpoints.down("md")),m=V(),f=d=>{d.stopPropagation(),i?i(s):m(`/view-persona/${s.id}`)};return e.jsxs(xe,{sx:{borderRadius:2,width:l?"100%":{xs:"100%",sm:240,md:270,lg:250},maxWidth:l?"100%":{xs:320,sm:240,md:270,lg:250},backgroundColor:"transparent",boxShadow:"none",transition:"transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out",cursor:"pointer",position:"relative",overflow:"visible","&:hover":{transform:"translateY(-2px)","& .persona-image":{boxShadow:"0 4px 16px rgba(0,0,0,0.15)"},"& .persona-image-overlay":{opacity:1},"& .start-chat-text":{opacity:1,pointerEvents:"auto",color:"white"}},"&:has(.role-link:hover)":{transform:"none","& .persona-image":{boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},"& .persona-image-overlay":{opacity:0},"& .start-chat-text":{opacity:0,pointerEvents:"none"}}},onClick:()=>t==null?void 0:t(s),children:[e.jsxs(r,{sx:{position:"relative"},children:[e.jsx(Ce,{component:"img",height:h?"250":g?"230":"210",image:s.avatarUrl||s.avatar||"",alt:s.name,className:"persona-image",sx:{objectFit:"cover",objectPosition:"top center",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"box-shadow 0.2s ease-in-out",width:"100%"}}),e.jsx(r,{className:"persona-image-overlay",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"8px",background:"rgba(0,0,0,0.25)",opacity:0,transition:"opacity 0.2s",zIndex:1,pointerEvents:"none"}}),e.jsx(r,{className:"start-chat-text",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",opacity:0,pointerEvents:"none",transition:"opacity 0.2s, color 0.2s",zIndex:2,fontWeight:600,fontSize:{xs:"14px",sm:"15px"},color:"white",userSelect:"none",cursor:"pointer","&:hover":{color:"#2950DA"}},onClick:d=>{d.stopPropagation(),t==null||t(s)},children:"Start Chat"})]}),e.jsxs(me,{sx:{p:{xs:1.5,sm:2},pt:{xs:1,sm:1.5},pb:"0px !important",background:"transparent"},children:[e.jsx(w,{variant:"h6",component:"h3",sx:{fontFamily:"Inter, Roboto, Helvetica, Arial, sans-serif",fontWeight:500,fontSize:{xs:"15px",sm:"16px"},lineHeight:{xs:"20px",sm:"24px"},letterSpacing:0,color:"#333",mb:.5,textAlign:{xs:"center",sm:"left"}},children:s.name}),e.jsxs(r,{className:"role-link",onClick:f,sx:{display:"flex",alignItems:"center",justifyContent:{xs:"center",sm:"flex-start"},gap:.5,cursor:"pointer",transition:"color 0.2s ease-in-out",color:"#2950DA",position:"relative",zIndex:10,"&:hover":{color:"#2950DA","& .external-icon":{transform:"translateX(2px)"}}},children:[e.jsx(w,{variant:"body2",sx:{fontFamily:"Inter, Roboto, Helvetica, Arial, sans-serif",fontWeight:400,fontSize:{xs:"13px",sm:"14px"},lineHeight:{xs:"18px",sm:"21px"},letterSpacing:0,color:"inherit"},children:s.role}),e.jsx(Me,{className:"external-icon",style:{fontSize:h?"14px":"16px",transition:"transform 0.2s ease-in-out",marginTop:"1px"}})]})]})]})},Ae=({personas:s,onStartChat:t,onViewPersona:i})=>e.jsx(r,{sx:{flexGrow:1,py:{xs:1,sm:-1,md:-1},px:0,width:"100%",maxWidth:1200},children:e.jsx(B,{container:!0,spacing:{xs:2,sm:3,md:4},justifyContent:"flex-start",sx:{width:"100%",margin:0},children:s.map(l=>e.jsx(B,{item:!0,xs:12,sm:6,md:3,sx:{width:"100%"},children:e.jsx(Ie,{persona:l,onStartChat:t,onViewPersona:i,cardFullWidth:!0})},l.id))})}),De=({currentPage:s,totalPages:t,onPageChange:i})=>{const l=$(),u=O(l.breakpoints.down("sm")),h=()=>{s>1&&i(s-1)},g=()=>{s<t&&i(s+1)},m=()=>{const f=[],d=u?5:7;let p=Math.max(1,s-Math.floor(d/2));const c=Math.min(t,p+d-1);c-p+1<d&&(p=Math.max(1,c-d+1)),p>1&&(f.push(e.jsx(N,{onClick:()=>i(1),variant:"text","aria-label":"Go to page 1",sx:{minWidth:{xs:36,sm:40},height:{xs:36,sm:40},borderRadius:1,mx:{xs:.25,sm:.5},backgroundColor:"transparent",color:"#666",fontWeight:500,fontSize:{xs:14,sm:16},"&:hover":{backgroundColor:"#f5f5f5"}},children:"1"},1)),p>2&&f.push(e.jsx(r,{sx:{mx:{xs:.25,sm:.5},color:"#666",fontSize:{xs:14,sm:16},display:"flex",alignItems:"center"},children:"..."},"ellipsis1")));for(let a=p;a<=c;a++)f.push(e.jsx(N,{onClick:()=>i(a),variant:s===a?"contained":"text","aria-label":`Go to page ${a}`,"aria-current":s===a?"page":void 0,sx:{minWidth:{xs:36,sm:40},height:{xs:36,sm:40},borderRadius:1,mx:{xs:.25,sm:.5},backgroundColor:s===a?"#2950DA":"transparent",color:s===a?"white":"#666",fontWeight:500,fontSize:{xs:14,sm:16},"&:hover":{backgroundColor:s===a?"#526794":"#f5f5f5"}},children:a},a));return c<t&&(c<t-1&&f.push(e.jsx(r,{sx:{mx:{xs:.25,sm:.5},color:"#666",fontSize:{xs:14,sm:16},display:"flex",alignItems:"center"},children:"..."},"ellipsis2")),f.push(e.jsx(N,{onClick:()=>i(t),variant:"text","aria-label":`Go to page ${t}`,sx:{minWidth:{xs:36,sm:40},height:{xs:36,sm:40},borderRadius:1,mx:{xs:.25,sm:.5},backgroundColor:"transparent",color:"#666",fontWeight:500,fontSize:{xs:14,sm:16},"&:hover":{backgroundColor:"#f5f5f5"}},children:t},t))),f};return e.jsx(r,{component:"nav","aria-label":"Pagination",sx:{mt:{xs:4,sm:6},mb:{xs:3,sm:4}},children:e.jsx(r,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flex:1,mx:{xs:2,sm:4}},children:e.jsxs(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",maxWidth:{xs:"100%",sm:900},width:"100%",flexWrap:"wrap"},children:[e.jsx(R,{onClick:h,disabled:s===1,"aria-label":"Previous page",sx:{mr:{xs:.5,sm:1},color:s===1?"#ccc":"#666",width:{xs:36,sm:40},height:{xs:36,sm:40},"&:hover":{backgroundColor:s===1?"transparent":"#f5f5f5"}},children:e.jsx(de,{sx:{fontSize:{xs:20,sm:24}}})}),m(),e.jsx(R,{onClick:g,disabled:s===t,"aria-label":"Next page",sx:{ml:{xs:.5,sm:1},color:s===t?"#ccc":"#666",width:{xs:36,sm:40},height:{xs:36,sm:40},"&:hover":{backgroundColor:s===t?"transparent":"#f5f5f5"}},children:e.jsx(je,{sx:{fontSize:{xs:20,sm:24}}})})]})})})},Ee=[{label:"Tech",value:"Tech",active:!0},{label:"Marketing",value:"Marketing",active:!1},{label:"Sales",value:"Sales",active:!1}],W={xs:"100%",sm:900,md:1100,lg:1200},U=["Tech","Marketing","Sales"],cs=({onStartChat:s})=>{const t=V(),i=re(),u=new URLSearchParams(i.search).get("search")||"",[h,g]=j.useState(u),[m,f]=j.useState(Ee.map(n=>({...n,active:!1}))),[d,p]=j.useState([]),[c,a]=j.useState(!0),[b,S]=j.useState(""),[D,M]=j.useState(1),I=8;j.useEffect(()=>{async function n(){try{a(!0),S("");const x=await pe();p(x.data||[])}catch(x){console.error("Error fetching personas from backend:",x),S(x instanceof Error?x.message:"Failed to load personas"),p([])}finally{a(!1)}}n()},[]);const A=m.filter(n=>n.active),o=d.filter(n=>{const x=h===""||n.name.toLowerCase().includes(h.toLowerCase())||n.description.toLowerCase().includes(h.toLowerCase()),v=A.length===0||A.some(L=>L.value===n.department);return x&&v}).sort((n,x)=>{if(n.department&&x.department){const v=U.indexOf(n.department),L=U.indexOf(x.department);if(v!==L)return v-L}return n.name.localeCompare(x.name)}),y=o.length,k=Math.ceil(y/I),C=(D-1)*I,E=o.slice(C,C+I),F=n=>{f(x=>x.map(v=>v.value===n?{...v,active:!v.active}:v)),M(1)},X=n=>{g(n),M(1);const x=new URLSearchParams(i.search);n?x.set("search",n):x.delete("search"),t({search:x.toString()},{replace:!0})},Y=n=>{M(n)},Z=n=>{t(`/view-persona/${n.id}`)};return c?e.jsxs(r,{sx:{minHeight:"100vh",backgroundColor:"#ffffff",overflowX:"hidden",position:"relative"},children:[e.jsx(T,{}),e.jsx(H,{maxWidth:!1,sx:{py:{xs:2,sm:3,md:4},px:{xs:1,sm:3,md:4},maxWidth:{xs:"100%",sm:"900px",md:"1200px",lg:"1200px"},display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e.jsx(w,{children:"Loading personas..."})})})]}):b?e.jsxs(r,{sx:{minHeight:"100vh",backgroundColor:"#ffffff",overflowX:"hidden",position:"relative"},children:[e.jsx(T,{}),e.jsx(H,{maxWidth:!1,sx:{py:{xs:2,sm:3,md:4},px:{xs:1,sm:3,md:4},maxWidth:{xs:"100%",sm:"900px",md:"1200px",lg:"1200px"},display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e.jsx(w,{color:"error",children:b})})})]}):e.jsxs(r,{sx:{minHeight:"100vh",backgroundColor:"#ffffff",overflowX:"hidden",position:"relative"},children:[e.jsx(T,{}),e.jsxs(H,{maxWidth:!1,sx:{py:{xs:2,sm:3,md:4},px:{xs:1,sm:3,md:4},maxWidth:{xs:"100%",sm:"900px",md:"1200px",lg:"1200px"},display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(r,{sx:{width:"100%",maxWidth:W,mb:{xs:2,sm:3}},children:e.jsx(r,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:e.jsx(ne,{value:h,onChange:X,maxWidth:"100%",fullWidth:!0})})}),e.jsx(r,{sx:{width:"100%",maxWidth:W,mb:3},children:e.jsx(ke,{filters:m,onFilterChange:F,showSelectedIndicator:!0,showClearAll:!0,title:"Filter by Department"})}),e.jsx(r,{sx:{width:"100%",maxWidth:W,mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"}}),e.jsx(r,{sx:{width:"100%",maxWidth:W,display:"flex",justifyContent:"flex-start"},children:y>0?e.jsx(Ae,{personas:E,onStartChat:s,onViewPersona:Z}):e.jsxs(r,{sx:{textAlign:"center",py:8,px:2,width:"100%"},children:[e.jsx(w,{variant:"h6",sx:{color:"#666",mb:1},children:"No personas found"}),e.jsx(w,{variant:"body2",sx:{color:"#999"},children:"Try adjusting your search or filters"})]})}),k>1&&e.jsx(r,{sx:{display:"flex",justifyContent:"center",mt:{xs:3,sm:4},mb:{xs:2,sm:3}},children:e.jsx(De,{currentPage:D,totalPages:k,onPageChange:Y})})]})]})};export{cs as default};
