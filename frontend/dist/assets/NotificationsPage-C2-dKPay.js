import{j as e,r as t,m as E,k as w,B as r,C as j,T as i,R as W}from"./index-5_xlyy_z.js";import{A as b,D as M}from"./AdminSidebar-ir24IhBt.js";import{u as N}from"./useMediaQuery-Cnns6WQt.js";import{I as B}from"./IconButton-gBT5SOuH.js";import{A as T}from"./ArrowBack-B-yBpf2G.js";import{c as L}from"./createSvgIcon-yTDobCCO.js";import{C as y}from"./Chip-CX1Ac_Cc.js";import{B as v}from"./Button-D0cPLAFR.js";import{A as P}from"./Alert-DgSVIo8A.js";import{P as A}from"./Paper-BlKRAiFO.js";import{L as H}from"./Menu-V8Z48i-c.js";import{L as O,a as F,b as Q}from"./ListItemText-BE67XL4E.js";import{D as V}from"./Divider-BNw4ekCJ.js";import"./useControlled-l9-LdqaY.js";import"./createSvgIcon-BNamIVrA.js";import"./Avatar-CgNGEcCC.js";import"./useSlot-D9lDOFSj.js";import"./resolveComponentProps-DW3eJbQO.js";import"./getThemeProps-1gZypGI7.js";const x=L(e.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2m6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5z"}),"NotificationsNone"),ce=()=>{const[n,a]=t.useState([]),[S,d]=t.useState(!0),[m,f]=t.useState(""),[C,h]=t.useState(!1),[p,g]=t.useState(null),k=E(),R=N(k.breakpoints.down("md")),u=w(),z=async()=>{try{d(!0),f(""),a([])}catch(s){console.error("Error fetching notifications:",s),f("Failed to load notifications")}finally{d(!1)}},D=async s=>{try{g(s),a(o=>o.map(c=>c.id===s?{...c,unread:!1}:c))}catch(o){console.error("Error marking notification as read:",o)}finally{g(null)}},I=async()=>{try{a(s=>s.map(o=>({...o,unread:!1})))}catch(s){console.error("Error marking all notifications as read:",s)}};t.useEffect(()=>{z()},[]);const l=n.filter(s=>s.unread).length;return S?e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:e.jsx(j,{})}):e.jsxs(r,{sx:{display:"flex",minHeight:"100vh",bgcolor:"#f7f8fa"},children:[e.jsx(r,{sx:{display:{xs:"none",md:"block"}},children:e.jsx(b,{userRole:"MEMBER",currentTab:"notifications",onSignOut:()=>u("/login")})}),e.jsx(M,{open:C,onClose:()=>h(!1),PaperProps:{sx:{width:240}},children:e.jsx(b,{userRole:"MEMBER",currentTab:"notifications",onSignOut:()=>u("/login"),isDrawer:!0})}),e.jsxs(r,{sx:{flex:1,display:"flex",flexDirection:"column",ml:{xs:0,md:"220px"}},children:[e.jsx(r,{sx:{bgcolor:"#fff",borderBottom:"1px solid #e0e0e0",p:{xs:2,md:3}},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:1200,mx:"auto"},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[R&&e.jsx(B,{onClick:()=>h(!0),sx:{color:"#2950DA"},children:e.jsx(T,{})}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(x,{sx:{color:"#2950DA",fontSize:28}}),e.jsx(i,{variant:"h4",sx:{fontWeight:700,color:"#222"},children:"Notifications"}),l>0&&e.jsx(y,{label:l,size:"small",sx:{bgcolor:"#2950DA",color:"#fff",fontWeight:700,ml:1}})]})]}),l>0&&e.jsx(v,{variant:"outlined",onClick:I,sx:{color:"#2950DA",borderColor:"#2950DA",fontWeight:600,textTransform:"none","&:hover":{borderColor:"#2950DA",bgcolor:"rgba(41, 80, 218, 0.04)"}},children:"Mark All as Read"})]})}),e.jsxs(r,{sx:{flex:1,px:{xs:2,md:4},py:{xs:2,md:3},maxWidth:1200,mx:"auto",width:"100%"},children:[m&&e.jsx(P,{severity:"error",sx:{mb:3},children:m}),n.length===0?e.jsxs(A,{elevation:0,sx:{borderRadius:3,p:{xs:4,md:8},textAlign:"center",bgcolor:"#fff"},children:[e.jsx(x,{sx:{fontSize:64,color:"#ccc",mb:2}}),e.jsx(i,{variant:"h5",sx:{color:"#666",mb:1},children:"No notifications yet"}),e.jsx(i,{sx:{color:"#999",fontSize:16},children:"You're all caught up! We'll notify you when there's something new."})]}):e.jsx(A,{elevation:0,sx:{borderRadius:3,overflow:"hidden"},children:e.jsx(H,{sx:{p:0},children:n.map((s,o)=>e.jsxs(W.Fragment,{children:[e.jsxs(O,{sx:{p:{xs:2,md:3},bgcolor:s.unread?"rgba(41, 80, 218, 0.02)":"#fff","&:hover":{bgcolor:s.unread?"rgba(41, 80, 218, 0.04)":"#f8f9fa"},transition:"background-color 0.2s ease"},children:[e.jsx(F,{sx:{minWidth:48},children:e.jsx(r,{sx:{bgcolor:s.unread?"#E8ECF2":"#f5f5f5",borderRadius:2,p:1,display:"flex",alignItems:"center",justifyContent:"center",width:40,height:40},children:e.jsx(x,{sx:{color:s.unread?"#2950DA":"#999",fontSize:20}})})}),e.jsx(Q,{primary:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(i,{sx:{fontWeight:s.unread?700:600,fontSize:16,color:"#222"},children:s.title}),s.unread&&e.jsx(r,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"#2950DA"}})]}),secondary:e.jsxs(r,{sx:{mt:1},children:[e.jsx(i,{sx:{color:"#444",fontSize:14,lineHeight:1.4,mb:1},children:s.content}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(i,{sx:{color:"#999",fontSize:12,fontWeight:500},children:s.time}),s.type&&e.jsx(y,{label:s.type,size:"small",variant:"outlined",sx:{fontSize:11,height:20,borderColor:"#ddd",color:"#666"}})]})]})}),s.unread&&e.jsx(v,{size:"small",onClick:()=>D(s.id),disabled:p===s.id,sx:{color:"#2950DA",textTransform:"none",fontWeight:600,fontSize:12,minWidth:0,px:1,"&:hover":{bgcolor:"rgba(41, 80, 218, 0.04)"}},children:p===s.id?e.jsx(j,{size:16}):"Mark as read"})]}),o<n.length-1&&e.jsx(V,{sx:{mx:2}})]},s.id))})})]})]})]})};export{ce as default};
