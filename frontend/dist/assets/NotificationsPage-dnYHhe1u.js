import{j as e,r as t,m as B,k as M,B as s,C as A,T as a,R as T}from"./index-CVFjBazT.js";import{A as S,D as L}from"./AdminSidebar-CF5Hd0jl.js";import{u as P}from"./useMediaQuery-DBMDA1h7.js";import{I as O}from"./IconButton-DlSDUMzR.js";import{A as H}from"./ArrowBack-Br4a0dxr.js";import{c as U}from"./createSvgIcon-BfE82ItR.js";import{C}from"./Chip-F7DHNsDx.js";import{B as k}from"./Button-z02TSlFu.js";import{A as F}from"./Alert-vWu0iFBa.js";import{P as I}from"./Paper-BgPd5ujD.js";import{L as J}from"./Menu-OLBZc4RG.js";import{L as Q,a as V,b as Y}from"./ListItemText-B-JvfqIR.js";import{D as q}from"./Divider-C8Z4Hsj1.js";import"./useControlled-DlQ_-1kq.js";import"./createSvgIcon-Cp9E4wFO.js";import"./Avatar-CRmYJ6bI.js";import"./useSlot-CInQRO00.js";import"./resolveComponentProps-CTLr-dSE.js";import"./getThemeProps-DEf1ea3E.js";const d=U(e.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2m6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5z"}),"NotificationsNone"),fe=()=>{const[n,l]=t.useState([]),[z,m]=t.useState(!0),[f,h]=t.useState(""),[D,p]=t.useState(!1),[g,u]=t.useState(null),R=B(),w=P(R.breakpoints.down("md")),j=M(),i=JSON.parse(localStorage.getItem("user")||"{}"),b=i.role||"MEMBER",y=i.name||"User",v=i.avatarUrl||i.avatar||"",N=async()=>{try{m(!0),h(""),l([])}catch(r){console.error("Error fetching notifications:",r),h("Failed to load notifications")}finally{m(!1)}},E=async r=>{try{u(r),l(o=>o.map(x=>x.id===r?{...x,unread:!1}:x))}catch(o){console.error("Error marking notification as read:",o)}finally{u(null)}},W=async()=>{try{l(r=>r.map(o=>({...o,unread:!1})))}catch(r){console.error("Error marking all notifications as read:",r)}};t.useEffect(()=>{N()},[]);const c=n.filter(r=>r.unread).length;return z?e.jsx(s,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:e.jsx(A,{})}):e.jsxs(s,{sx:{display:"flex",minHeight:"100vh",bgcolor:"#f7f8fa"},children:[e.jsx(s,{sx:{display:{xs:"none",md:"block"}},children:e.jsx(S,{userRole:b,currentTab:"notifications",onSignOut:()=>j("/login"),userName:y,avatarUrl:v})}),e.jsx(L,{open:D,onClose:()=>p(!1),PaperProps:{sx:{width:240}},children:e.jsx(S,{userRole:b,currentTab:"notifications",onSignOut:()=>j("/login"),isDrawer:!0,userName:y,avatarUrl:v})}),e.jsxs(s,{sx:{flex:1,display:"flex",flexDirection:"column",ml:{xs:0,md:"220px"}},children:[e.jsx(s,{sx:{bgcolor:"#fff",borderBottom:"1px solid #e0e0e0",p:{xs:2,md:3}},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:1200,mx:"auto"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[w&&e.jsx(O,{onClick:()=>p(!0),sx:{color:"#2950DA"},children:e.jsx(H,{})}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(d,{sx:{color:"#2950DA",fontSize:28}}),e.jsx(a,{variant:"h4",sx:{fontWeight:700,color:"#222"},children:"Notifications"}),c>0&&e.jsx(C,{label:c,size:"small",sx:{bgcolor:"#2950DA",color:"#fff",fontWeight:700,ml:1}})]})]}),c>0&&e.jsx(k,{variant:"outlined",onClick:W,sx:{color:"#2950DA",borderColor:"#2950DA",fontWeight:600,textTransform:"none","&:hover":{borderColor:"#2950DA",bgcolor:"rgba(41, 80, 218, 0.04)"}},children:"Mark All as Read"})]})}),e.jsxs(s,{sx:{flex:1,px:{xs:2,md:4},py:{xs:2,md:3},maxWidth:1200,mx:"auto",width:"100%"},children:[f&&e.jsx(F,{severity:"error",sx:{mb:3},children:f}),n.length===0?e.jsxs(I,{elevation:0,sx:{borderRadius:3,p:{xs:4,md:8},textAlign:"center",bgcolor:"#fff"},children:[e.jsx(d,{sx:{fontSize:64,color:"#ccc",mb:2}}),e.jsx(a,{variant:"h5",sx:{color:"#666",mb:1},children:"No notifications yet"}),e.jsx(a,{sx:{color:"#999",fontSize:16},children:"You're all caught up! We'll notify you when there's something new."})]}):e.jsx(I,{elevation:0,sx:{borderRadius:3,overflow:"hidden"},children:e.jsx(J,{sx:{p:0},children:n.map((r,o)=>e.jsxs(T.Fragment,{children:[e.jsxs(Q,{sx:{p:{xs:2,md:3},bgcolor:r.unread?"rgba(41, 80, 218, 0.02)":"#fff","&:hover":{bgcolor:r.unread?"rgba(41, 80, 218, 0.04)":"#f8f9fa"},transition:"background-color 0.2s ease"},children:[e.jsx(V,{sx:{minWidth:48},children:e.jsx(s,{sx:{bgcolor:r.unread?"#E8ECF2":"#f5f5f5",borderRadius:2,p:1,display:"flex",alignItems:"center",justifyContent:"center",width:40,height:40},children:e.jsx(d,{sx:{color:r.unread?"#2950DA":"#999",fontSize:20}})})}),e.jsx(Y,{primary:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(a,{sx:{fontWeight:r.unread?700:600,fontSize:16,color:"#222"},children:r.title}),r.unread&&e.jsx(s,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"#2950DA"}})]}),secondary:e.jsxs(s,{sx:{mt:1},children:[e.jsx(a,{sx:{color:"#444",fontSize:14,lineHeight:1.4,mb:1},children:r.content}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(a,{sx:{color:"#999",fontSize:12,fontWeight:500},children:r.time}),r.type&&e.jsx(C,{label:r.type,size:"small",variant:"outlined",sx:{fontSize:11,height:20,borderColor:"#ddd",color:"#666"}})]})]})}),r.unread&&e.jsx(k,{size:"small",onClick:()=>E(r.id),disabled:g===r.id,sx:{color:"#2950DA",textTransform:"none",fontWeight:600,fontSize:12,minWidth:0,px:1,"&:hover":{bgcolor:"rgba(41, 80, 218, 0.04)"}},children:g===r.id?e.jsx(A,{size:16}):"Mark as read"})]}),o<n.length-1&&e.jsx(q,{sx:{mx:2}})]},r.id))})})]})]})]})};export{fe as default};
