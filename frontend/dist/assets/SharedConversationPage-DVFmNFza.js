import{j as r,o as C,k,r as a,B as e,C as S,T as t}from"./index-DYCawVz4.js";import{j as I}from"./personaService-ZsIsG1EY.js";import{P as A,F as B}from"./FormattedOutput-DnRerFk2.js";import{C as h}from"./Container-DDyoxMTW.js";import{P as i}from"./Paper-Bgtif2Ge.js";import{A as j}from"./Alert-D72j-c0T.js";import{B as m}from"./Button-C_jCaeEK.js";import{c as E}from"./createSvgIcon-pvlxLHl_.js";import{A as g}from"./session-sYSmwvGn.js";import{D as w}from"./Divider-DltVXmpm.js";import"./useThemeProps-CsaTaIua.js";import"./useSlot-BHojEugq.js";import"./resolveComponentProps-RqVTStnW.js";import"./IconButton-BeZRpjOd.js";const p=E(r.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack"),V=()=>{const{token:c}=C(),v=k(),[u,l]=a.useState(!0),[f,x]=a.useState(null),[o,y]=a.useState(null);a.useEffect(()=>{(async()=>{if(!c){x("No token provided"),l(!1);return}try{l(!0),x(null);const s=await I(c);y(s.data)}catch(s){const b=s instanceof Error?s.message:"Failed to load shared conversation";x(b)}finally{l(!1)}})()},[c]);const d=()=>{v("/")};return u?r.jsx(e,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#f5f5f5"},children:r.jsxs(e,{sx:{textAlign:"center"},children:[r.jsx(S,{size:60}),r.jsx(t,{variant:"h6",sx:{mt:2},children:"Loading shared conversation..."})]})}):f?r.jsx(e,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#f5f5f5"},children:r.jsx(h,{maxWidth:"sm",children:r.jsxs(i,{sx:{p:4,textAlign:"center"},children:[r.jsx(j,{severity:"error",sx:{mb:2},children:f}),r.jsx(m,{variant:"contained",onClick:d,startIcon:r.jsx(p,{}),children:"Go Back"})]})})}):o?r.jsx(e,{sx:{minHeight:"100vh",bgcolor:"#f5f5f5",py:2},children:r.jsxs(h,{maxWidth:"md",children:[r.jsxs(i,{sx:{p:3,mb:2},children:[r.jsxs(e,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[r.jsx(m,{variant:"outlined",onClick:d,startIcon:r.jsx(p,{}),children:"Back"}),r.jsx(t,{variant:"h5",component:"h1",children:"Shared Conversation"})]}),r.jsxs(e,{sx:{display:"flex",alignItems:"center",gap:2},children:[r.jsx(g,{sx:{bgcolor:"primary.main"},children:r.jsx(A,{})}),r.jsxs(e,{children:[r.jsx(t,{variant:"h6",children:o.persona.name}),r.jsx(t,{variant:"body2",color:"text.secondary",children:o.persona.description})]})]})]}),r.jsxs(i,{sx:{p:3},children:[r.jsx(t,{variant:"h6",sx:{mb:2},children:"Conversation"}),r.jsx(e,{sx:{maxHeight:"70vh",overflowY:"auto"},children:o.messages.map((n,s)=>r.jsxs(e,{sx:{mb:3},children:[r.jsxs(e,{sx:{display:"flex",alignItems:"flex-start",gap:2,mb:1},children:[r.jsx(g,{sx:{bgcolor:n.role==="USER"?"primary.main":"secondary.main",width:32,height:32,fontSize:"0.875rem"},children:n.role==="USER"?"U":"A"}),r.jsxs(e,{sx:{flex:1},children:[r.jsx(t,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:n.role==="USER"?"User":o.persona.name}),r.jsxs(e,{sx:{bgcolor:"background.paper",p:2,borderRadius:1},children:[r.jsx(B,{content:n.content}),n.fileUrl&&r.jsxs(e,{sx:{mt:1},children:[r.jsx(t,{variant:"caption",color:"text.secondary",children:"Attachment:"}),r.jsx(e,{component:"a",href:n.fileUrl,target:"_blank",rel:"noopener noreferrer",sx:{display:"block",mt:.5,color:"primary.main",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"View File"})]})]})]})]}),s<o.messages.length-1&&r.jsx(w,{sx:{my:2}})]},s))})]})]})}):r.jsx(e,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#f5f5f5"},children:r.jsx(h,{maxWidth:"sm",children:r.jsxs(i,{sx:{p:4,textAlign:"center"},children:[r.jsx(j,{severity:"warning",children:"No conversation data found"}),r.jsx(m,{variant:"contained",onClick:d,startIcon:r.jsx(p,{}),sx:{mt:2},children:"Go Back"})]})})})};export{V as default};
