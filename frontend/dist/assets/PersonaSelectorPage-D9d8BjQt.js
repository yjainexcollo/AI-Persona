import{j as e,B as o,T as h,r as s,k as A}from"./index-CVFjBazT.js";import{H as x}from"./Header-CGK7AgwC.js";import{S as P}from"./SearchBar-N8ZiUfFC.js";import{A as k}from"./ArrowOutward-DsHYLo-Q.js";import{G as j}from"./Grid-DMH1W0xs.js";import{I as D}from"./IconButton-DlSDUMzR.js";import{A as I}from"./Avatar-CRmYJ6bI.js";import{C as W}from"./ChatInputBar-VNm8xIjO.js";import{g as H}from"./personaService-DQ8Mj8Y1.js";import"./index-JZKuJLno.js";import"./Paper-BgPd5ujD.js";import"./SettingsPage-CyiQULyI.js";import"./AdminSidebar-CF5Hd0jl.js";import"./useControlled-DlQ_-1kq.js";import"./Menu-OLBZc4RG.js";import"./resolveComponentProps-CTLr-dSE.js";import"./Button-z02TSlFu.js";import"./createSvgIcon-Cp9E4wFO.js";import"./createSvgIcon-BfE82ItR.js";import"./useMediaQuery-DBMDA1h7.js";import"./getThemeProps-DEf1ea3E.js";import"./Divider-C8Z4Hsj1.js";import"./session-Cma3K_fR.js";import"./workspaceService-CU4ueMZD.js";import"./SwitchBase-DR-Bl87B.js";import"./TextField-DAm2tQd-.js";import"./DialogTitle-Bnyi_i4z.js";import"./Alert-vWu0iFBa.js";import"./useSlot-CInQRO00.js";import"./avatarService-BCG4JWCu.js";import"./Stack-D5A5of7w.js";import"./useThemeProps-BUEs0OeN.js";import"./InputAdornment-qZMVxQ_8.js";import"./ListItemText-B-JvfqIR.js";import"./Chip-F7DHNsDx.js";const p=()=>e.jsx(o,{sx:{mt:6,mb:4,textAlign:"center",px:{xs:2,sm:0}},children:e.jsx(h,{variant:"h4",sx:{fontWeight:800,color:"#222",fontSize:{xs:28,sm:36},mb:1},children:"Choose a persona to chat"})}),z=({personas:i,onSelect:a,onViewPersona:l})=>e.jsx(o,{sx:{width:"100%",maxWidth:1e3,mx:"auto",mt:-2},children:e.jsx(j,{container:!0,columnSpacing:2,rowSpacing:6,justifyContent:"center",children:i.map(r=>e.jsxs(j,{item:!0,xs:12,sm:4,md:4,lg:4,xl:4,sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(D,{onClick:()=>a(r),sx:{p:0,mb:1.5,"&:hover":{background:"transparent"}},children:e.jsx(I,{src:r.avatarUrl||r.avatar||"",sx:{width:104,height:104,mb:0}})}),e.jsx(h,{onClick:()=>a(r),sx:{fontWeight:700,fontSize:20,color:"#222",textAlign:"center",mb:.5,cursor:"pointer","&:hover":{textDecoration:"underline"}},children:r.name}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:.5,justifyContent:"center"},children:[e.jsx(h,{onClick:()=>l(r),sx:{color:"#2950DA",fontWeight:500,fontSize:16,textAlign:"center",textTransform:"capitalize",cursor:"pointer","&:hover":{textDecoration:"underline"}},children:r.role}),e.jsx(k,{sx:{color:"#2950DA",fontSize:18,mb:"-2px",cursor:"pointer"},onClick:()=>l(r)})]})]},r.id))})}),de=()=>{const[i,a]=s.useState(""),[l,r]=s.useState(""),[y,d]=s.useState([]),[S,f]=s.useState(!0),[u,g]=s.useState(""),c=A();s.useEffect(()=>{async function t(){try{f(!0),g("");const n=await H();d(n.data||[])}catch(n){console.error("Error fetching personas from backend:",n),g(n instanceof Error?n.message:"Failed to load personas"),d([])}finally{f(!1)}}t()},[]);const m=y.filter(t=>t.name.toLowerCase().includes(i.toLowerCase())||t.description.toLowerCase().includes(i.toLowerCase())).slice(0,6),v=t=>{c(`/chat/${t.id}`)},w=t=>{c(`/view-persona/${t.id}`)},C=t=>{console.log("Message to send:",t.message),t.fileUrl&&console.log("File attached:",t.fileUrl,t.fileType),m.length>0&&c(`/chat/${m[0].id}`,{state:{initialMessage:t.message}})},b=["Help me with marketing strategy","Analyze sales performance","Review technical architecture","Get business insights","Plan product roadmap"];return S?e.jsxs(o,{sx:{minHeight:"100vh",bgcolor:"#fff",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsx(x,{}),e.jsx(p,{}),e.jsx(o,{sx:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(Typography,{children:"Loading personas..."})})]}):u?e.jsxs(o,{sx:{minHeight:"100vh",bgcolor:"#fff",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsx(x,{}),e.jsx(p,{}),e.jsx(o,{sx:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(Typography,{color:"error",children:u})})]}):e.jsxs(o,{sx:{minHeight:"100vh",bgcolor:"#fff",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsx(x,{}),e.jsx(p,{}),e.jsxs(o,{sx:{flex:1,pb:20},children:[e.jsx(o,{sx:{width:"100%",maxWidth:1300,mx:"auto",mb:3},children:e.jsx(P,{value:i,onChange:a,placeholder:"Search",maxWidth:840,fullWidth:!0})}),e.jsx(z,{personas:m,onSelect:v,onViewPersona:w})]}),e.jsx(W,{value:l,onChange:r,onSend:C,placeholder:"Ask any question or describe what you need help with...",showSuggestions:!0,suggestions:b,maxWidth:1200})]})};export{de as default};
