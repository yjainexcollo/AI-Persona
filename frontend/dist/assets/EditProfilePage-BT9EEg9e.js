import{j as e,_ as q,s as R,b as g,y as U,a as J,g as V,r as c,u as X,c as K,e as Q,T as h,f as N,h as $,i as H,R as Y,B as s,C as Z}from"./index-DYCawVz4.js";import{P as ee}from"./PhotoCamera-BKz64eu3.js";import{g as re,H as oe}from"./HomeOutlined-28NUgevx.js";import{r as L}from"./createSvgIcon-C__bowmj.js";import{S as te}from"./Search--YIJYMiZ.js";import{A as D,f as E}from"./session-sYSmwvGn.js";import{c as se}from"./createSvgIcon-pvlxLHl_.js";import{b as le,B as z}from"./Button-C_jCaeEK.js";import{u as ae}from"./Menu-Cj0BlqQ8.js";import{T as S}from"./TextField-DEyW8a8s.js";import{I as ne}from"./InputAdornment-CMOWfscG.js";import{P as F}from"./Paper-Bgtif2Ge.js";import"./useControlled-B9mKIuas.js";import"./useSlot-BHojEugq.js";import"./resolveComponentProps-RqVTStnW.js";const ie=se(e.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz"),ce=["slots","slotProps"],de=R(le,{name:"MuiBreadcrumbCollapsed"})(({theme:r})=>g({display:"flex",marginLeft:`calc(${r.spacing(1)} * 0.5)`,marginRight:`calc(${r.spacing(1)} * 0.5)`},r.palette.mode==="light"?{backgroundColor:r.palette.grey[100],color:r.palette.grey[700]}:{backgroundColor:r.palette.grey[700],color:r.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":g({},r.palette.mode==="light"?{backgroundColor:r.palette.grey[200]}:{backgroundColor:r.palette.grey[600]}),"&:active":g({boxShadow:r.shadows[0]},r.palette.mode==="light"?{backgroundColor:U.emphasize(r.palette.grey[200],.12)}:{backgroundColor:U.emphasize(r.palette.grey[600],.12)})})),ue=R(ie)({width:24,height:16});function pe(r){const{slots:t={},slotProps:l={}}=r,p=q(r,ce),a=r;return e.jsx("li",{children:e.jsx(de,g({focusRipple:!0},p,{ownerState:a,children:e.jsx(ue,g({as:t.CollapsedIcon,ownerState:a},l.collapsedIcon))}))})}function fe(r){return V("MuiBreadcrumbs",r)}const xe=J("MuiBreadcrumbs",["root","ol","li","separator"]),me=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],he=r=>{const{classes:t}=r;return Q({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},fe,t)},ge=R(h,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(r,t)=>[{[`& .${xe.li}`]:t.li},t.root]})({}),be=R("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(r,t)=>t.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),ve=R("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(r,t)=>t.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function je(r,t,l,p){return r.reduce((a,m,d)=>(d<r.length-1?a=a.concat(m,e.jsx(ve,{"aria-hidden":!0,className:t,ownerState:p,children:l},`separator-${d}`)):a.push(m),a),[])}const ye=c.forwardRef(function(t,l){const p=X({props:t,name:"MuiBreadcrumbs"}),{children:a,className:m,component:d="nav",slots:b={},slotProps:B={},expandText:v="Show path",itemsAfterCollapse:j=1,itemsBeforeCollapse:x=1,maxItems:C=8,separator:I="/"}=p,A=q(p,me),[o,n]=c.useState(!1),i=g({},p,{component:d,expanded:o,expandText:v,itemsAfterCollapse:j,itemsBeforeCollapse:x,maxItems:C,separator:I}),f=he(i),y=ae({elementType:b.CollapsedIcon,externalSlotProps:B.collapsedIcon,ownerState:i}),W=c.useRef(null),G=u=>{const O=()=>{n(!0);const M=W.current.querySelector("a[href],button,[tabindex]");M&&M.focus()};return x+j>=u.length?u:[...u.slice(0,x),e.jsx(pe,{"aria-label":v,slots:{CollapsedIcon:b.CollapsedIcon},slotProps:{collapsedIcon:y},onClick:O},"ellipsis"),...u.slice(u.length-j,u.length)]},k=c.Children.toArray(a).filter(u=>c.isValidElement(u)).map((u,O)=>e.jsx("li",{className:f.li,children:u},`child-${O}`));return e.jsx(ge,g({ref:l,component:d,color:"text.secondary",className:K(f.root,m),ownerState:i},A,{children:e.jsx(be,{className:f.ol,ref:W,ownerState:i,children:je(o||C&&k.length<=C?k:G(k),f.separator,I,i)})}))});var P={},_;function Ce(){if(_)return P;_=1;var r=N();Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var t=r(L()),l=$();return P.default=(0,t.default)((0,l.jsx)("path",{d:"M16.67 13.13C18.04 14.06 19 15.32 19 17v3h4v-3c0-2.18-3.57-3.47-6.33-3.87M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4c-.47 0-.91.1-1.33.24C14.5 5.27 15 6.58 15 8s-.5 2.73-1.33 3.76c.42.14.86.24 1.33.24m-6 0c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 7c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4m6 5H3v-.99C3.2 16.29 6.3 15 9 15s5.8 1.29 6 2z"}),"PeopleAltOutlined"),P}var Se=Ce();const Pe=H(Se);var w={},T;function we(){if(T)return w;T=1;var r=N();Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var t=r(L()),l=$();return w.default=(0,t.default)((0,l.jsx)("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"}),"SettingsOutlined"),w}var Re=we();const Ie=H(Re),ze=[{icon:e.jsx(oe,{sx:{fontSize:28}}),label:"Dashboard",active:!0},{icon:e.jsx(Pe,{sx:{fontSize:28}}),label:"Users"},{icon:e.jsx(Ie,{sx:{fontSize:28}}),label:"Settings"}],He=()=>{const[r,t]=c.useState({fullName:"",email:"",phone:"",address:""}),[l,p]=c.useState(null),[a,m]=c.useState(!1),[d,b]=c.useState(null),[B,v]=c.useState(null),j=c.useRef(null),x=o=>{t({...r,[o.target.name]:o.target.value})};Y.useEffect(()=>{(async()=>{try{const i=await E("http://localhost:3000/api/users/me");if(!i.ok)throw new Error("Failed to fetch profile");const f=await i.json();p(f.data.user)}catch(n){console.error("Failed to load profile:",n)}})()},[]);const C=o=>{var y;const n=(y=o.target.files)==null?void 0:y[0];if(!n)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(n.type)){alert("Please select a valid image file (JPEG, PNG, GIF, or WebP)");return}const f=2*1024*1024;if(n.size>f){alert("File size too large. Maximum size is 2MB");return}b(n),v(URL.createObjectURL(n))},I=async()=>{if(d){m(!0);try{const o="http://localhost:3000",n=new FormData;n.append("avatar",d);const i=await E(`${o}/api/users/me/avatar`,{method:"POST",body:n});if(!i.ok){const y=await i.json();throw new Error(y.error||"Failed to upload avatar")}const f=await i.json();v(null),b(null),alert("Avatar uploaded successfully!")}catch(o){alert(o instanceof Error?o.message:"Failed to upload avatar. Please try again.")}finally{m(!1)}}},A=()=>{var o;(o=j.current)==null||o.click()};return e.jsxs(s,{sx:{display:"flex",minHeight:"100vh",bgcolor:"#f7f8fa"},children:[e.jsxs(s,{sx:{width:120,bgcolor:"#fff",borderRight:"1px solid #f0f0f0",display:"flex",flexDirection:"column",alignItems:"center",py:3,position:"relative"},children:[e.jsx(h,{variant:"h6",sx:{fontWeight:900,color:"#b97a7a",mb:6},children:"LOGO"}),e.jsx(s,{sx:{flex:1,width:"100%"},children:ze.map(o=>e.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:4,cursor:"pointer"},children:[o.icon,e.jsx(h,{sx:{fontWeight:600,fontSize:15,color:o.active?"#2950DA":"#444",mt:1},children:o.label})]},o.label))}),e.jsx(D,{src:"https://randomuser.me/api/portraits/women/44.jpg",sx:{width:48,height:48,position:"absolute",bottom:24,left:"50%",transform:"translateX(-50%)"}})]}),e.jsxs(s,{sx:{flex:1,px:6,py:4},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(ye,{separator:"â€º","aria-label":"breadcrumb",children:[e.jsx(h,{sx:{color:"#888",fontWeight:600,fontSize:22},children:"Profile"}),e.jsx(h,{sx:{color:"#222",fontWeight:800,fontSize:26},children:"Edit Profile"})]}),e.jsx(S,{placeholder:"Search",size:"small",InputProps:{startAdornment:e.jsx(ne,{position:"start",children:e.jsx(te,{sx:{color:"#bdbdbd"}})}),sx:{borderRadius:3,bgcolor:"#fff",width:220,fontSize:16}}})]}),e.jsx(F,{elevation:0,sx:{borderRadius:3,p:0,mb:4,overflow:"hidden",bgcolor:"#f2f7f3"},children:e.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:5,position:"relative",minHeight:220},children:[e.jsxs(s,{sx:{position:"relative",width:140,height:140,mb:2},children:[e.jsx(D,{src:B||re(l==null?void 0:l.avatarUrl),sx:{width:140,height:140,bgcolor:"#e6e6e6",fontSize:80},children:e.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("circle",{cx:"12",cy:"8",r:"4",stroke:"#222",strokeWidth:"2"}),e.jsx("path",{d:"M4 20c0-4 4-7 8-7s8 3 8 7",stroke:"#222",strokeWidth:"2"})]})}),e.jsx(s,{onClick:A,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",bgcolor:"rgba(0,0,0,0.15)",borderRadius:"50%",transition:"background 0.2s","&:hover":{bgcolor:"rgba(0,0,0,0.25)"}},children:e.jsx(ee,{sx:{color:"#fff",fontSize:32}})})]}),d&&e.jsxs(s,{sx:{mb:2,display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:[e.jsxs(h,{sx:{color:"#666",fontSize:14},children:["Selected: ",d.name]}),e.jsxs(s,{sx:{display:"flex",gap:1},children:[e.jsx(z,{variant:"contained",size:"small",disabled:a,onClick:I,sx:{bgcolor:"#2950DA",color:"#fff","&:hover":{bgcolor:"#526794"},"&:disabled":{bgcolor:"#ccc"}},children:a?e.jsxs(e.Fragment,{children:[e.jsx(Z,{size:16,sx:{color:"#fff",mr:1}}),"Uploading..."]}):"Upload Avatar"}),e.jsx(z,{variant:"outlined",size:"small",disabled:a,onClick:()=>{b(null),v(null)},sx:{borderColor:"#666",color:"#666","&:hover":{borderColor:"#333",color:"#333"}},children:"Cancel"})]})]})]})}),e.jsxs(F,{elevation:0,sx:{borderRadius:3,p:4,maxWidth:900,mx:"auto",position:"relative"},children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mb:2},children:[e.jsx(z,{variant:"contained",sx:{bgcolor:"#bdbdbd",color:"#fff",fontWeight:700,borderRadius:2,px:4,py:1,fontSize:16,textTransform:"none",boxShadow:"none","&:hover":{bgcolor:"#a0a0a0"}},children:"Cancel"}),e.jsx(z,{variant:"contained",sx:{bgcolor:"#2950DA",color:"#fff",fontWeight:700,borderRadius:2,px:4,py:1,fontSize:16,textTransform:"none",boxShadow:"none","&:hover":{bgcolor:"#526794"}},children:"Save Changes"})]}),e.jsxs(s,{sx:{display:"flex",gap:4,flexWrap:"wrap"},children:[e.jsx(s,{sx:{flex:1,minWidth:220},children:e.jsx(h,{sx:{fontWeight:700,fontSize:18,color:"#888",mb:2},children:"Personal Information"})}),e.jsxs(s,{sx:{flex:3,minWidth:320,display:"flex",flexDirection:"column",gap:2},children:[e.jsx(S,{label:"Full name",name:"fullName",value:r.fullName,onChange:x,fullWidth:!0,sx:{bgcolor:"#fafbfc",borderRadius:2}}),e.jsx(S,{label:"Email",name:"email",value:r.email,onChange:x,fullWidth:!0,sx:{bgcolor:"#fafbfc",borderRadius:2}}),e.jsx(S,{label:"Phone No.",name:"phone",value:r.phone,onChange:x,fullWidth:!0,sx:{bgcolor:"#fafbfc",borderRadius:2}}),e.jsx(S,{label:"Address",name:"address",value:r.address,onChange:x,fullWidth:!0,multiline:!0,minRows:2,sx:{bgcolor:"#fafbfc",borderRadius:2}})]})]})]})]}),e.jsx("input",{type:"file",ref:j,onChange:C,accept:"image/jpeg,image/png,image/gif,image/webp",style:{display:"none"}})]})};export{He as default};
