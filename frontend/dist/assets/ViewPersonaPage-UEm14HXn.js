import{a as We,g as ke,r as a,u as Re,_ as ve,b as S,c as V,j as e,s as J,d as Ge,e as Be,A as vt,D as Ze,m as St,B as d,T as R,f as ce,h as de,i as ue,o as yt,k as jt,C as wt}from"./index-5_xlyy_z.js";import{H as Ct}from"./Header-DZkiF6_1.js";import{i as It,g as Wt,b as kt}from"./personaService-DQ8Mj8Y1.js";import{A as et}from"./Avatar-CgNGEcCC.js";import{b as tt,u as Ce,B as Ue}from"./Button-D0cPLAFR.js";import{d as ot,a as rt,o as Rt}from"./useControlled-l9-LdqaY.js";import{c as st}from"./createSvgIcon-yTDobCCO.js";import{u as ge,L as Bt}from"./Menu-V8Z48i-c.js";import{C as Et}from"./Chip-CX1Ac_Cc.js";import{L as Tt,b as Pt}from"./ListItemText-BE67XL4E.js";import{L as zt}from"./ListItemAvatar-3CGNjcAa.js";import{r as fe}from"./createSvgIcon-BNamIVrA.js";import"./index-C1Yy76z9.js";import"./Paper-BlKRAiFO.js";import"./SettingsPage-CWokYxVL.js";import"./AdminSidebar-ir24IhBt.js";import"./useMediaQuery-Cnns6WQt.js";import"./getThemeProps-1gZypGI7.js";import"./Divider-BNw4ekCJ.js";import"./IconButton-gBT5SOuH.js";import"./session-Cma3K_fR.js";import"./workspaceService-W5-pIJdk.js";import"./SwitchBase-CinLHmWg.js";import"./TextField-DTeEVDZd.js";import"./resolveComponentProps-DW3eJbQO.js";import"./DialogTitle-Bj6VsLFW.js";import"./Alert-DgSVIo8A.js";import"./useSlot-D9lDOFSj.js";import"./Grid-CP4iQOeX.js";import"./avatarService-BCG4JWCu.js";import"./Stack-CQpL_mHI.js";import"./useThemeProps-PxfVUI2_.js";import"./InputAdornment-ChgL2PRV.js";let Z;function nt(){if(Z)return Z;const t=document.createElement("div"),o=document.createElement("div");return o.style.width="10px",o.style.height="1px",t.appendChild(o),t.dir="rtl",t.style.fontSize="14px",t.style.width="4px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.overflow="scroll",document.body.appendChild(t),Z="reverse",t.scrollLeft>0?Z="default":(t.scrollLeft=1,t.scrollLeft===0&&(Z="negative")),document.body.removeChild(t),Z}function At(t,o){const s=t.scrollLeft;if(o!=="rtl")return s;switch(nt()){case"negative":return t.scrollWidth-t.clientWidth+s;case"reverse":return t.scrollWidth-t.clientWidth-s;default:return s}}function Mt(t){return ke("MuiTab",t)}const q=We("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),Nt=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],Ot=t=>{const{classes:o,textColor:s,fullWidth:i,wrapped:c,icon:u,label:h,selected:b,disabled:f}=t,y={root:["root",u&&h&&"labelIcon",`textColor${Ge(s)}`,i&&"fullWidth",c&&"wrapped",b&&"selected",f&&"disabled"],iconWrapper:["iconWrapper"]};return Be(y,Mt,o)},Lt=J(tt,{name:"MuiTab",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:s}=t;return[o.root,s.label&&s.icon&&o.labelIcon,o[`textColor${Ge(s.textColor)}`],s.fullWidth&&o.fullWidth,s.wrapped&&o.wrapped,{[`& .${q.iconWrapper}`]:o.iconWrapper}]}})(({theme:t,ownerState:o})=>S({},t.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},o.label&&{flexDirection:o.iconPosition==="top"||o.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},o.icon&&o.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${q.iconWrapper}`]:S({},o.iconPosition==="top"&&{marginBottom:6},o.iconPosition==="bottom"&&{marginTop:6},o.iconPosition==="start"&&{marginRight:t.spacing(1)},o.iconPosition==="end"&&{marginLeft:t.spacing(1)})},o.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${q.selected}`]:{opacity:1},[`&.${q.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},o.textColor==="primary"&&{color:(t.vars||t).palette.text.secondary,[`&.${q.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${q.disabled}`]:{color:(t.vars||t).palette.text.disabled}},o.textColor==="secondary"&&{color:(t.vars||t).palette.text.secondary,[`&.${q.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${q.disabled}`]:{color:(t.vars||t).palette.text.disabled}},o.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},o.wrapped&&{fontSize:t.typography.pxToRem(12)})),Ft=a.forwardRef(function(o,s){const i=Re({props:o,name:"MuiTab"}),{className:c,disabled:u=!1,disableFocusRipple:h=!1,fullWidth:b,icon:f,iconPosition:y="top",indicator:j,label:I,onChange:g,onClick:W,onFocus:k,selected:P,selectionFollowsFocus:T,textColor:z="inherit",value:A,wrapped:ee=!1}=i,D=ve(i,Nt),X=S({},i,{disabled:u,disableFocusRipple:h,selected:P,icon:!!f,iconPosition:y,label:!!I,fullWidth:b,textColor:z,wrapped:ee}),H=Ot(X),O=f&&I&&a.isValidElement(f)?a.cloneElement(f,{className:V(H.iconWrapper,f.props.className)}):f,G=M=>{!P&&g&&g(M,A),W&&W(M)},U=M=>{T&&!P&&g&&g(M,A),k&&k(M)};return e.jsxs(Lt,S({focusRipple:!h,className:V(H.root,c),ref:s,role:"tab","aria-selected":P,disabled:u,onClick:G,onFocus:U,ownerState:X,tabIndex:P?0:-1},D,{children:[y==="top"||y==="start"?e.jsxs(a.Fragment,{children:[O,I]}):e.jsxs(a.Fragment,{children:[I,O]}),j]}))}),Dt=st(e.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),Ht=st(e.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function Ut(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}function _t(t,o,s,i={},c=()=>{}){const{ease:u=Ut,duration:h=300}=i;let b=null;const f=o[t];let y=!1;const j=()=>{y=!0},I=g=>{if(y){c(new Error("Animation cancelled"));return}b===null&&(b=g);const W=Math.min(1,(g-b)/h);if(o[t]=u(W)*(s-f)+f,W>=1){requestAnimationFrame(()=>{c(null)});return}requestAnimationFrame(I)};return f===s?(c(new Error("Element already at target position")),j):(requestAnimationFrame(I),j)}const $t=["onChange"],qt={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Vt(t){const{onChange:o}=t,s=ve(t,$t),i=a.useRef(),c=a.useRef(null),u=()=>{i.current=c.current.offsetHeight-c.current.clientHeight};return vt(()=>{const h=ot(()=>{const f=i.current;u(),f!==i.current&&o(i.current)}),b=rt(c.current);return b.addEventListener("resize",h),()=>{h.clear(),b.removeEventListener("resize",h)}},[o]),a.useEffect(()=>{u(),o(i.current)},[o]),e.jsx("div",S({style:qt},s,{ref:c}))}function Xt(t){return ke("MuiTabScrollButton",t)}const Kt=We("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),Yt=["className","slots","slotProps","direction","orientation","disabled"],Qt=t=>{const{classes:o,orientation:s,disabled:i}=t;return Be({root:["root",s,i&&"disabled"]},Xt,o)},Jt=J(tt,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:s}=t;return[o.root,s.orientation&&o[s.orientation]]}})(({ownerState:t})=>S({width:40,flexShrink:0,opacity:.8,[`&.${Kt.disabled}`]:{opacity:0}},t.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${t.isRtl?-90:90}deg)`}})),Gt=a.forwardRef(function(o,s){var i,c;const u=Re({props:o,name:"MuiTabScrollButton"}),{className:h,slots:b={},slotProps:f={},direction:y}=u,j=ve(u,Yt),I=Ze(),g=S({isRtl:I},u),W=Qt(g),k=(i=b.StartScrollButtonIcon)!=null?i:Dt,P=(c=b.EndScrollButtonIcon)!=null?c:Ht,T=ge({elementType:k,externalSlotProps:f.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:g}),z=ge({elementType:P,externalSlotProps:f.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:g});return e.jsx(Jt,S({component:"div",className:V(W.root,h),ref:s,role:null,ownerState:g,tabIndex:null},j,{children:y==="left"?e.jsx(k,S({},T)):e.jsx(P,S({},z))}))});function Zt(t){return ke("MuiTabs",t)}const Ie=We("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),eo=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],_e=(t,o)=>t===o?t.firstChild:o&&o.nextElementSibling?o.nextElementSibling:t.firstChild,$e=(t,o)=>t===o?t.lastChild:o&&o.previousElementSibling?o.previousElementSibling:t.lastChild,be=(t,o,s)=>{let i=!1,c=s(t,o);for(;c;){if(c===t.firstChild){if(i)return;i=!0}const u=c.disabled||c.getAttribute("aria-disabled")==="true";if(!c.hasAttribute("tabindex")||u)c=s(t,c);else{c.focus();return}}},to=t=>{const{vertical:o,fixed:s,hideScrollbar:i,scrollableX:c,scrollableY:u,centered:h,scrollButtonsHideMobile:b,classes:f}=t;return Be({root:["root",o&&"vertical"],scroller:["scroller",s&&"fixed",i&&"hideScrollbar",c&&"scrollableX",u&&"scrollableY"],flexContainer:["flexContainer",o&&"flexContainerVertical",h&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",b&&"scrollButtonsHideMobile"],scrollableX:[c&&"scrollableX"],hideScrollbar:[i&&"hideScrollbar"]},Zt,f)},oo=J("div",{name:"MuiTabs",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:s}=t;return[{[`& .${Ie.scrollButtons}`]:o.scrollButtons},{[`& .${Ie.scrollButtons}`]:s.scrollButtonsHideMobile&&o.scrollButtonsHideMobile},o.root,s.vertical&&o.vertical]}})(({ownerState:t,theme:o})=>S({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&{[`& .${Ie.scrollButtons}`]:{[o.breakpoints.down("sm")]:{display:"none"}}})),ro=J("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(t,o)=>{const{ownerState:s}=t;return[o.scroller,s.fixed&&o.fixed,s.hideScrollbar&&o.hideScrollbar,s.scrollableX&&o.scrollableX,s.scrollableY&&o.scrollableY]}})(({ownerState:t})=>S({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),so=J("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(t,o)=>{const{ownerState:s}=t;return[o.flexContainer,s.vertical&&o.flexContainerVertical,s.centered&&o.centered]}})(({ownerState:t})=>S({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})),no=J("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(t,o)=>o.indicator})(({ownerState:t,theme:o})=>S({position:"absolute",height:2,bottom:0,width:"100%",transition:o.transitions.create()},t.indicatorColor==="primary"&&{backgroundColor:(o.vars||o).palette.primary.main},t.indicatorColor==="secondary"&&{backgroundColor:(o.vars||o).palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})),io=J(Vt)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),qe={},lo=a.forwardRef(function(o,s){const i=Re({props:o,name:"MuiTabs"}),c=St(),u=Ze(),{"aria-label":h,"aria-labelledby":b,action:f,centered:y=!1,children:j,className:I,component:g="div",allowScrollButtonsMobile:W=!1,indicatorColor:k="primary",onChange:P,orientation:T="horizontal",ScrollButtonComponent:z=Gt,scrollButtons:A="auto",selectionFollowsFocus:ee,slots:D={},slotProps:X={},TabIndicatorProps:H={},TabScrollButtonProps:O={},textColor:G="primary",value:U,variant:M="standard",visibleScrollbar:C=!1}=i,r=ve(i,eo),p=M==="scrollable",v=T==="vertical",B=v?"scrollTop":"scrollLeft",pe=v?"top":"left",he=v?"bottom":"right",Se=v?"clientHeight":"clientWidth",te=v?"height":"width",K=S({},i,{component:g,allowScrollButtonsMobile:W,indicatorColor:k,orientation:T,vertical:v,scrollButtons:A,textColor:G,variant:M,visibleScrollbar:C,fixed:!p,hideScrollbar:p&&!C,scrollableX:p&&!v,scrollableY:p&&v,centered:y&&!p,scrollButtonsHideMobile:!W}),_=to(K),it=ge({elementType:D.StartScrollButtonIcon,externalSlotProps:X.startScrollButtonIcon,ownerState:K}),lt=ge({elementType:D.EndScrollButtonIcon,externalSlotProps:X.endScrollButtonIcon,ownerState:K}),[Ee,at]=a.useState(!1),[Y,Te]=a.useState(qe),[Pe,ct]=a.useState(!1),[ze,dt]=a.useState(!1),[Ae,ut]=a.useState(!1),[Me,ft]=a.useState({overflow:"hidden",scrollbarWidth:0}),Ne=new Map,L=a.useRef(null),Q=a.useRef(null),Oe=()=>{const n=L.current;let l;if(n){const x=n.getBoundingClientRect();l={clientWidth:n.clientWidth,scrollLeft:n.scrollLeft,scrollTop:n.scrollTop,scrollLeftNormalized:At(n,u?"rtl":"ltr"),scrollWidth:n.scrollWidth,top:x.top,bottom:x.bottom,left:x.left,right:x.right}}let m;if(n&&U!==!1){const x=Q.current.children;if(x.length>0){const w=x[Ne.get(U)];m=w?w.getBoundingClientRect():null}}return{tabsMeta:l,tabMeta:m}},oe=Ce(()=>{const{tabsMeta:n,tabMeta:l}=Oe();let m=0,x;if(v)x="top",l&&n&&(m=l.top-n.top+n.scrollTop);else if(x=u?"right":"left",l&&n){const E=u?n.scrollLeftNormalized+n.clientWidth-n.scrollWidth:n.scrollLeft;m=(u?-1:1)*(l[x]-n[x]+E)}const w={[x]:m,[te]:l?l[te]:0};if(isNaN(Y[x])||isNaN(Y[te]))Te(w);else{const E=Math.abs(Y[x]-w[x]),N=Math.abs(Y[te]-w[te]);(E>=1||N>=1)&&Te(w)}}),ye=(n,{animation:l=!0}={})=>{l?_t(B,L.current,n,{duration:c.transitions.duration.standard}):L.current[B]=n},Le=n=>{let l=L.current[B];v?l+=n:(l+=n*(u?-1:1),l*=u&&nt()==="reverse"?-1:1),ye(l)},Fe=()=>{const n=L.current[Se];let l=0;const m=Array.from(Q.current.children);for(let x=0;x<m.length;x+=1){const w=m[x];if(l+w[Se]>n){x===0&&(l=n);break}l+=w[Se]}return l},pt=()=>{Le(-1*Fe())},ht=()=>{Le(Fe())},xt=a.useCallback(n=>{ft({overflow:null,scrollbarWidth:n})},[]),mt=()=>{const n={};n.scrollbarSizeListener=p?e.jsx(io,{onChange:xt,className:V(_.scrollableX,_.hideScrollbar)}):null;const m=p&&(A==="auto"&&(Pe||ze)||A===!0);return n.scrollButtonStart=m?e.jsx(z,S({slots:{StartScrollButtonIcon:D.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:it},orientation:T,direction:u?"right":"left",onClick:pt,disabled:!Pe},O,{className:V(_.scrollButtons,O.className)})):null,n.scrollButtonEnd=m?e.jsx(z,S({slots:{EndScrollButtonIcon:D.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:lt},orientation:T,direction:u?"left":"right",onClick:ht,disabled:!ze},O,{className:V(_.scrollButtons,O.className)})):null,n},De=Ce(n=>{const{tabsMeta:l,tabMeta:m}=Oe();if(!(!m||!l)){if(m[pe]<l[pe]){const x=l[B]+(m[pe]-l[pe]);ye(x,{animation:n})}else if(m[he]>l[he]){const x=l[B]+(m[he]-l[he]);ye(x,{animation:n})}}}),xe=Ce(()=>{p&&A!==!1&&ut(!Ae)});a.useEffect(()=>{const n=ot(()=>{L.current&&oe()});let l;const m=E=>{E.forEach(N=>{N.removedNodes.forEach(re=>{var $;($=l)==null||$.unobserve(re)}),N.addedNodes.forEach(re=>{var $;($=l)==null||$.observe(re)})}),n(),xe()},x=rt(L.current);x.addEventListener("resize",n);let w;return typeof ResizeObserver<"u"&&(l=new ResizeObserver(n),Array.from(Q.current.children).forEach(E=>{l.observe(E)})),typeof MutationObserver<"u"&&(w=new MutationObserver(m),w.observe(Q.current,{childList:!0})),()=>{var E,N;n.clear(),x.removeEventListener("resize",n),(E=w)==null||E.disconnect(),(N=l)==null||N.disconnect()}},[oe,xe]),a.useEffect(()=>{const n=Array.from(Q.current.children),l=n.length;if(typeof IntersectionObserver<"u"&&l>0&&p&&A!==!1){const m=n[0],x=n[l-1],w={root:L.current,threshold:.99},E=we=>{ct(!we[0].isIntersecting)},N=new IntersectionObserver(E,w);N.observe(m);const re=we=>{dt(!we[0].isIntersecting)},$=new IntersectionObserver(re,w);return $.observe(x),()=>{N.disconnect(),$.disconnect()}}},[p,A,Ae,j==null?void 0:j.length]),a.useEffect(()=>{at(!0)},[]),a.useEffect(()=>{oe()}),a.useEffect(()=>{De(qe!==Y)},[De,Y]),a.useImperativeHandle(f,()=>({updateIndicator:oe,updateScrollButtons:xe}),[oe,xe]);const He=e.jsx(no,S({},H,{className:V(_.indicator,H.className),ownerState:K,style:S({},Y,H.style)}));let me=0;const bt=a.Children.map(j,n=>{if(!a.isValidElement(n))return null;const l=n.props.value===void 0?me:n.props.value;Ne.set(l,me);const m=l===U;return me+=1,a.cloneElement(n,S({fullWidth:M==="fullWidth",indicator:m&&!Ee&&He,selected:m,selectionFollowsFocus:ee,onChange:P,textColor:G,value:l},me===1&&U===!1&&!n.props.tabIndex?{tabIndex:0}:{}))}),gt=n=>{const l=Q.current,m=Rt(l).activeElement;if(m.getAttribute("role")!=="tab")return;let w=T==="horizontal"?"ArrowLeft":"ArrowUp",E=T==="horizontal"?"ArrowRight":"ArrowDown";switch(T==="horizontal"&&u&&(w="ArrowRight",E="ArrowLeft"),n.key){case w:n.preventDefault(),be(l,m,$e);break;case E:n.preventDefault(),be(l,m,_e);break;case"Home":n.preventDefault(),be(l,null,_e);break;case"End":n.preventDefault(),be(l,null,$e);break}},je=mt();return e.jsxs(oo,S({className:V(_.root,I),ownerState:K,ref:s,as:g},r,{children:[je.scrollButtonStart,je.scrollbarSizeListener,e.jsxs(ro,{className:_.scroller,ownerState:K,style:{overflow:Me.overflow,[v?`margin${u?"Left":"Right"}`:"marginBottom"]:C?void 0:-Me.scrollbarWidth},ref:L,children:[e.jsx(so,{"aria-label":h,"aria-labelledby":b,"aria-orientation":T==="vertical"?"vertical":null,className:_.flexContainer,ownerState:K,onKeyDown:gt,ref:Q,role:"tablist",children:bt}),Ee&&He]}),je.scrollButtonEnd]}))}),ao=({avatar:t,name:o,role:s,onStartChat:i})=>{const[c,u]=a.useState(!1),[h,b]=a.useState(!1),f=window.location.pathname.split("/").pop();a.useEffect(()=>{(async()=>{if(f)try{u(!1)}catch{u(!1)}})()},[f]);const y=async()=>{if(f){b(!0);try{const j=await It(f);u(j.isFavourited)}catch(j){console.error("Error toggling favorite:",j)}b(!1)}};return e.jsxs(d,{sx:{display:"flex",alignItems:{xs:"flex-start",sm:"center"},gap:4,mb:1,mt:-1.5,flexWrap:{xs:"wrap",sm:"nowrap"}},children:[e.jsx(et,{src:t,sx:{width:100,height:100,mt:1.5}}),e.jsxs(d,{sx:{minWidth:0},children:[e.jsx(R,{sx:{fontWeight:800,fontSize:28,color:"#222",mb:.5},children:o}),e.jsx(R,{sx:{color:"#2950DA",fontWeight:500,fontSize:18,mb:1},children:s})]}),e.jsx(d,{sx:{flex:1}}),e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1,mt:{xs:2,sm:0}},children:[e.jsx(Ue,{variant:"contained",sx:{bgcolor:"#2950DA",color:"#fff",fontWeight:700,fontSize:15,borderRadius:2,px:3,py:.7,minHeight:36,boxShadow:"none",textTransform:"none","&:hover":{bgcolor:"#526794"}},onClick:i,children:"Start Chat"}),e.jsx(Ue,{variant:c?"outlined":"text",onClick:y,disabled:h,sx:{ml:1,fontWeight:700,fontSize:15,textTransform:"none",color:c?"#e53935":"#222",borderColor:c?"#e53935":"rgba(0,0,0,0.12)"},children:c?"Remove Favorite":"Mark as favorite"})]})]})},co=["About","Personality traits","Use Cases","Latest Updates"],uo=({value:t,onChange:o})=>e.jsx(d,{sx:{borderBottom:1,borderColor:"#e0e0e0",mb:2},children:e.jsx(lo,{value:t,onChange:(s,i)=>o(i),textColor:"inherit",TabIndicatorProps:{style:{backgroundColor:"#2950DA",height:3,borderRadius:2}},sx:{"& .MuiTabs-indicator":{backgroundColor:"#2950DA",height:3,borderRadius:2},"& .MuiTab-root":{fontWeight:700,fontSize:16,color:"#888",textTransform:"none",minWidth:120},"& .Mui-selected":{color:"#2950DA"}},children:co.map((s,i)=>e.jsx(Ft,{label:s},s))})}),F=({title:t,children:o,sx:s})=>e.jsxs(d,{sx:{mb:3,overflowX:"hidden",wordBreak:"break-word",...s},children:[e.jsx(R,{sx:{fontWeight:800,fontSize:20,color:"#222",mb:1},children:t}),e.jsx(d,{sx:{maxWidth:"100%",overflowWrap:"break-word"},children:o})]}),Ve=({chips:t})=>e.jsx(d,{sx:{display:"flex",flexWrap:"wrap",gap:1.5,mb:1,maxWidth:"100%"},children:t.map(o=>e.jsx(Et,{label:o,sx:{bgcolor:"#E8ECF2",color:"#2950DA",fontWeight:600,fontSize:15,borderRadius:2,px:1.5,height:34,maxWidth:"100%","& .MuiChip-label":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},o))}),fo=({personas:t,onSelect:o,currentPersonaId:s})=>e.jsxs(d,{sx:{width:220,pt:0,pr:0},children:[e.jsx(R,{sx:{fontWeight:800,fontSize:18,mb:0,color:"#222"},children:"Similar Personas"}),e.jsx(Bt,{children:t.map(i=>e.jsxs(Tt,{button:!0,onClick:()=>o(i.id),sx:{borderRadius:2,mb:.5,"&:hover":{background:"#f5f5f7"},px:1,background:i.id===s?"#f0f0f2":"transparent"},children:[e.jsx(zt,{children:e.jsx(et,{src:i.avatar,sx:{width:44,height:44,mr:1}})}),e.jsx(Pt,{primary:e.jsx(R,{sx:{fontWeight:700,fontSize:16,color:"#222"},children:i.name}),secondary:e.jsx(R,{sx:{color:"#2950DA",fontWeight:500,fontSize:14},children:i.role})})]},i.id))})]}),po=async(t,o)=>{const i=await fetch("http://localhost:3000/api/webhooks/traits/forward",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(t)});if(!i.ok){const c=await i.text();throw new Error(`Forward failed: ${i.status} - ${c}`)}return i.json()},ho=()=>({getAuthToken:a.useCallback(async()=>{console.log("ðŸ” useAuth: Checking for token in localStorage...");const o=localStorage.getItem("token");if(console.log("ðŸ” useAuth: Token found:",o?"Yes":"No"),!o)throw console.error("âŒ useAuth: No authentication token found in localStorage"),new Error("No authentication token found. Please log in first.");return console.log("âœ… useAuth: Token retrieved successfully"),o},[])}),xo=({personaName:t,onTraitsUpdated:o})=>{const[s,i]=a.useState(!1),[c,u]=a.useState(""),[h,b]=a.useState(""),[f,y]=a.useState(null),{getAuthToken:j}=ho(),I=async()=>{try{i(!0),b(""),u("Triggering traits update..."),console.log("ðŸ” Starting traits update process...");const g=await j();console.log("ðŸ”‘ Got auth token:",g?"Token exists":"No token");const W={personaName:t,metadata:{about:"Updated persona description based on AI analysis",coreExpertise:["Updated expertise area 1","Updated expertise area 2","Updated expertise area 3"],communicationStyle:"Updated communication style description",traits:["Updated trait 1","Updated trait 2","Updated trait 3"],painPoints:["Updated pain point 1","Updated pain point 2"],keyResponsibilities:["Updated responsibility 1","Updated responsibility 2"]}};console.log("ðŸ“¦ Sample traits update payload:",W),console.log("ðŸš€ Calling forwardPersonaTraitsViaBackend function...");const k=await po(W,g);console.log("âœ… Traits update result:",k),u("Traits update triggered successfully!"),b(""),o&&o()}catch(g){console.error("âŒ Error in triggerTraitsUpdate:",g),b(g instanceof Error?g.message:"Traits update failed"),u("")}finally{i(!1)}};return e.jsx("section",{className:"mb-6",children:e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white shadow-sm",children:[e.jsx("div",{className:"px-6 pt-5 pb-4 border-b border-gray-100 flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Status"}),f===!0&&e.jsxs("span",{className:"inline-flex items-center rounded-full bg-green-50 px-2.5 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20",children:[e.jsx("span",{className:"mr-1 block h-1.5 w-1.5 rounded-full bg-green-600"}),"Connected"]}),f===!1&&e.jsxs("span",{className:"inline-flex items-center rounded-full bg-red-50 px-2.5 py-1 text-xs font-medium text-red-700 ring-1 ring-inset ring-red-600/20",children:[e.jsx("span",{className:"mr-1 block h-1.5 w-1.5 rounded-full bg-red-600"}),"Unreachable"]}),f===null&&e.jsxs("span",{className:"inline-flex items-center rounded-full bg-gray-50 px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-600/10",children:[e.jsx("span",{className:"mr-1 block h-1.5 w-1.5 rounded-full bg-gray-400"}),"Not tested"]})]})}),e.jsxs("div",{className:"px-6 py-5",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:e.jsxs("button",{onClick:I,disabled:s||!t||f===!1,className:"inline-flex items-center justify-center rounded-lg bg-indigo-600 px-4 py-2.5 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 disabled:cursor-not-allowed disabled:opacity-60",children:[s?e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0a12 12 0 100 24v-4a8 8 0 01-8-8z"})]}):e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Update persona traits"]})}),e.jsxs("div",{className:"mt-4 space-y-2","aria-live":"polite",children:[c&&e.jsxs("div",{className:"flex items-start rounded-md border border-blue-200 bg-blue-50 px-3 py-2 text-sm text-blue-800",children:[e.jsx("span",{className:"mr-2 mt-0.5 block h-2 w-2 rounded-full bg-blue-500"}),e.jsx("span",{children:c})]}),h&&e.jsxs("div",{className:"flex items-start rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-800",children:[e.jsx("span",{className:"mr-2 mt-0.5 block h-2 w-2 rounded-full bg-red-500"}),e.jsx("span",{children:h})]})]})]})]})})};var se={},Xe;function mo(){if(Xe)return se;Xe=1;var t=ce();Object.defineProperty(se,"__esModule",{value:!0}),se.default=void 0;var o=t(fe()),s=de();return se.default=(0,o.default)((0,s.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zM6 20V4h7v5h5v11z"}),"InsertDriveFileOutlined"),se}var bo=mo();const go=ue(bo);var ne={},Ke;function vo(){if(Ke)return ne;Ke=1;var t=ce();Object.defineProperty(ne,"__esModule",{value:!0}),ne.default=void 0;var o=t(fe()),s=de();return ne.default=(0,o.default)((0,s.jsx)("path",{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2zM4 6h16v10H4z"}),"ComputerOutlined"),ne}var So=vo();const yo=ue(So);var ie={},Ye;function jo(){if(Ye)return ie;Ye=1;var t=ce();Object.defineProperty(ie,"__esModule",{value:!0}),ie.default=void 0;var o=t(fe()),s=de();return ie.default=(0,o.default)((0,s.jsx)("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"}),"StorageOutlined"),ie}var wo=jo();const Co=ue(wo);var le={},Qe;function Io(){if(Qe)return le;Qe=1;var t=ce();Object.defineProperty(le,"__esModule",{value:!0}),le.default=void 0;var o=t(fe()),s=de();return le.default=(0,o.default)((0,s.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92zM17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"}),"EditOutlined"),le}var Wo=Io();const ko=ue(Wo);var ae={},Je;function Ro(){if(Je)return ae;Je=1;var t=ce();Object.defineProperty(ae,"__esModule",{value:!0}),ae.default=void 0;var o=t(fe()),s=de();return ae.default=(0,o.default)((0,s.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M4 12c0-.61.08-1.21.21-1.78L8.99 15v1c0 1.1.9 2 2 2v1.93C7.06 19.43 4 16.07 4 12m13.89 5.4c-.26-.81-1-1.4-1.9-1.4h-1v-3c0-.55-.45-1-1-1h-6v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41C17.92 5.77 20 8.65 20 12c0 2.08-.81 3.98-2.11 5.4"}),"PublicOutlined"),ae}var Bo=Ro();const Eo=ue(Bo),dr=({persona:t})=>{const{id:o}=yt(),[s,i]=a.useState(0),[c,u]=a.useState(!0),[h,b]=a.useState(null),[f,y]=a.useState(null),[j,I]=a.useState([]),g=jt(),W=async()=>{try{if(u(!0),y(null),!o){y("No persona ID provided");return}const r=await kt(o);b({id:r.id,name:r.name,role:r.personaRole||"",avatar:r.avatarUrl||"",traits:[{title:"About",description:r.about||r.description||""},{title:"Core Expertise",description:r.coreExpertise||""},{title:"Communication Style",description:r.communicationStyle||""},{title:"Traits",description:r.traits||""},{title:"Pain Points",description:r.painPoints||""},{title:"Key Responsibilities",description:r.keyResponsibility||""}]})}catch(r){console.error("Error fetching persona data:",r),y(r instanceof Error?r.message:"Failed to load persona data")}finally{u(!1)}};a.useEffect(()=>{async function r(){try{const v=((await Wt()).data||[]).map(B=>({id:B.id,name:B.name,role:B.role||"Unknown",avatar:B.avatarUrl||"",personaRole:B.personaRole,avatarUrl:B.avatarUrl}));I(v)}catch(p){console.error("Error fetching personas from backend:",p),I([])}}r()},[]),a.useEffect(()=>{o&&W()},[o]);const k=r=>h!=null&&h.traits?h.traits.find(p=>p.title&&p.title.toLowerCase()===r.toLowerCase()):null,P=()=>{const r=k("About");return(r==null?void 0:r.description)||"No about information available."},T=()=>{const r=k("Communication Style");return(r==null?void 0:r.description)||"No communication style information available."};function z(r){if(Array.isArray(r))return r;if(r&&typeof r=="object"&&Object.keys(r).length===1){const p=r[Object.keys(r)[0]];if(Array.isArray(p))return p}if(typeof r=="string"){const p=r.trim();if(p.startsWith("{")&&p.endsWith("}")||p.startsWith("[")&&p.endsWith("]"))try{const v=JSON.parse(p);if(Array.isArray(v))return v;if(v&&typeof v=="object"&&Object.keys(v).length===1){const B=v[Object.keys(v)[0]];if(Array.isArray(B))return B}}catch{}return[r]}return[String(r)]}const A=()=>{const r=k("Core Expertise");return r!=null&&r.description?z(r.description):["No core expertise information available."]},ee=()=>{const r=k("Traits");return r!=null&&r.description?z(r.description):["No traits information available."]},D=()=>{const r=k("Pain Points");return r!=null&&r.description?z(r.description):["No pain points information available."]},X=()=>{const r=k("Key Responsibilities");return r!=null&&r.description?z(r.description):["No key responsibilities information available."]},H=()=>j.length?j.filter(r=>r.id!==o).map(r=>({id:r.id,name:r.name,role:r.role||r.personaRole||"",avatar:r.avatarUrl||r.avatar||""})):[],O=r=>{g(`/view-persona/${r}`)},G=[{img:"https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80",text:"How should I explain our fallback transaction mechanism in pitches?"},{img:"https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=400&q=80",text:"What's the best way to position our QR settlement timelines?"},{img:"https://images.unsplash.com/photo-1518770660439-4636190af475?auto=format&fit=crop&w=400&q=80",text:"Can you help validate how we compare to Razorpay on uptime and disputes?"},{img:"",text:"How do I counter merchant objections about T+1 settlements?"}],U=[{name:"Sarah Chen",avatar:"https://randomuser.me/api/portraits/women/47.jpg",text:"A client asked if we offer instant settlement. How flexible are we on that?"},{name:"Sarah Chen",avatar:"https://randomuser.me/api/portraits/women/47.jpg",text:"What's our standard SLA for resolving failed transactions during peak hours?"}],M=[{icon:e.jsx(go,{sx:{fontSize:28,color:"#222"}}),title:"Integrated April 2025 Meta Ads update",date:"April 20, 2025"},{icon:e.jsx(yo,{sx:{fontSize:28,color:"#222"}}),title:"Completed training on new product features",date:"April 15, 2025"},{icon:e.jsx(Co,{sx:{fontSize:28,color:"#222"}}),title:"Updated knowledge base with Q1 2025 data",date:"April 10, 2025"},{icon:e.jsx(ko,{sx:{fontSize:28,color:"#222"}}),title:"Refreshed persona's tone and style guidelines",date:"April 5, 2025"},{icon:e.jsx(Eo,{sx:{fontSize:28,color:"#222"}}),title:"Added support for new languages",date:"March 28, 2025"}];if(c)return e.jsx(d,{sx:{minHeight:"100vh",bgcolor:"#fff",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(wt,{})});if(f)return e.jsx(d,{sx:{minHeight:"100vh",bgcolor:"#fff",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(R,{color:"error",children:f})});if(!(h!=null&&h.traits)||h.traits.length===0)return e.jsx(d,{sx:{minHeight:"100vh",bgcolor:"#fff",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(R,{children:"No traits found for this persona."})});const C=t||h;return e.jsxs(d,{sx:{minHeight:"100vh",bgcolor:"#fff"},children:[e.jsx(Ct,{}),e.jsxs(d,{sx:{display:"flex",pt:4,pb:6,pr:8,maxWidth:1350,margin:"0 auto",flexDirection:{xs:"column",md:"row"}},children:[e.jsx(d,{sx:{display:{xs:"none",md:"block"},pl:3},children:e.jsx(fo,{personas:H(),onSelect:O,currentPersonaId:o})}),e.jsxs(d,{sx:{flex:1,pl:{xs:2,md:2},maxWidth:{xs:"100%",md:"calc(100% - 240px)"},overflowX:"hidden"},children:[e.jsx(ao,{avatar:(C==null?void 0:C.avatar)||"",name:(C==null?void 0:C.name)||"",role:(C==null?void 0:C.role)||"",onStartChat:()=>g(`/chat/${C==null?void 0:C.id}`)}),e.jsx(xo,{personaName:(C==null?void 0:C.name)||"",onTraitsUpdated:()=>{o&&W()}}),e.jsx(uo,{value:s,onChange:i}),s===0&&e.jsxs(e.Fragment,{children:[e.jsxs(d,{sx:{display:"flex",gap:2,mb:4,flexWrap:"wrap"},children:[e.jsxs(d,{sx:{border:"1.5px solid #e0e0e0",borderRadius:2,p:3,minWidth:200,flex:"1 1 200px",bgcolor:"#fff"},children:[e.jsx(R,{sx:{color:"#666",fontSize:14,fontWeight:500,mb:1},children:"Avg. User Rating"}),e.jsx(R,{sx:{fontSize:24,fontWeight:700,color:"#222"},children:"4.8/5"})]}),e.jsxs(d,{sx:{border:"1.5px solid #e0e0e0",borderRadius:2,p:3,minWidth:200,flex:"1 1 200px",bgcolor:"#fff"},children:[e.jsx(R,{sx:{color:"#666",fontSize:14,fontWeight:500,mb:1},children:"Total Conversations"}),e.jsx(R,{sx:{fontSize:24,fontWeight:700,color:"#222"},children:"23.4K"})]}),e.jsxs(d,{sx:{border:"1.5px solid #e0e0e0",borderRadius:2,p:3,minWidth:200,flex:"1 1 200px",bgcolor:"#fff"},children:[e.jsx(R,{sx:{color:"#666",fontSize:14,fontWeight:500,mb:1},children:"Success Rate"}),e.jsx(R,{sx:{fontSize:24,fontWeight:700,color:"#222"},children:"92%"})]})]}),e.jsx(F,{title:"About",children:P().split(`
`).map((r,p)=>e.jsx(d,{sx:{mb:1,overflowWrap:"break-word",textAlign:"justify"},children:e.jsx("span",{children:r})},p))}),e.jsx(F,{title:"Core Expertise",children:e.jsx(Ve,{chips:A()})}),e.jsx(F,{title:"Communication Style",children:e.jsx(d,{sx:{overflowWrap:"break-word",textAlign:"justify"},children:e.jsx("span",{children:T()})})})]}),s===1&&e.jsxs(e.Fragment,{children:[e.jsx(F,{title:"Traits",children:e.jsx(Ve,{chips:ee()})}),e.jsx(F,{title:"Pain Points",children:e.jsx(d,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:D().map(r=>e.jsx(d,{sx:{border:"1.5px solid #e0e0e0",borderRadius:2,p:2.2,minWidth:250,maxWidth:280,fontWeight:500,fontSize:16,color:"#222",bgcolor:"#fff",flex:"1 1 260px",overflowWrap:"break-word"},children:r},r))})}),e.jsx(F,{title:"Key Responsibilities",children:e.jsx(d,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:X().map(r=>e.jsx(d,{sx:{border:"1.5px solid #e0e0e0",borderRadius:2,p:2.2,minWidth:250,maxWidth:280,fontWeight:500,fontSize:16,color:"#222",bgcolor:"#fff",flex:"1 1 260px",overflowWrap:"break-word"},children:r},r))})})]}),s===2&&e.jsxs(e.Fragment,{children:[e.jsx(F,{title:"Sample Questions",sx:{mb:4},children:e.jsx(d,{sx:{display:"flex",flexDirection:"row",gap:4,overflowX:"auto",justifyContent:"flex-start",pb:1},children:G.map((r,p)=>e.jsxs(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",bgcolor:"#fff",borderRadius:3,p:0,minWidth:200,maxWidth:200,width:150,boxShadow:"0 1px 4px rgba(44,62,80,0.04)"},children:[e.jsx(d,{sx:{width:200,height:200,bgcolor:r.img?"transparent":"#E8ECF2",display:"flex",alignItems:"center",justifyContent:"center",mt:2,mb:2,overflow:"hidden"},children:r.img?e.jsx(d,{component:"img",src:r.img,alt:"question",sx:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(d,{sx:{width:40,height:40,borderRadius:2,bgcolor:"#cfe7db"}})}),e.jsx(R,{sx:{fontSize:14,color:"#111",fontWeight:500,textAlign:"center",px:1,pb:2},children:r.text})]},p))})}),e.jsx(F,{title:"Example Interactions",children:e.jsx(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:U.map((r,p)=>e.jsxs(d,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[e.jsx(d,{component:"img",src:r.avatar,alt:r.name,sx:{width:44,height:44,borderRadius:"50%",objectFit:"cover",mt:.5}}),e.jsxs(d,{sx:{flex:1},children:[e.jsx(R,{sx:{fontWeight:600,fontSize:15,color:"#2950DA",mb:.5},children:r.name}),e.jsx(d,{sx:{bgcolor:"#e8f5e9",borderRadius:2,px:2,py:1,display:"inline-block",fontSize:16,color:"#222",fontWeight:500},children:r.text})]})]},p))})})]}),s===3&&e.jsx(F,{title:"Latest Updates",children:e.jsx(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:M.map((r,p)=>e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:2,bgcolor:"#f8fafb",borderRadius:2,p:2,boxShadow:"0 1px 4px rgba(44,62,80,0.04)"},children:[e.jsx(d,{children:r.icon}),e.jsxs(d,{sx:{flex:1},children:[e.jsx(d,{sx:{fontWeight:600,fontSize:16,color:"#222"},children:r.title}),e.jsx(d,{sx:{fontSize:14,color:"#888",mt:.5},children:r.date})]})]},p))})})]})]})]})};export{dr as default};
